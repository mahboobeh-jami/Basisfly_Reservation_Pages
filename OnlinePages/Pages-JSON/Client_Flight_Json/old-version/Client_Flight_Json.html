<basis core="group" name="check-lang" if="'[##cms.form.clid|(1)##]' <> '1'">
    <basis core="group" name="hasNot-rkey" if="'[##cms.cookie.rkey##]' = ''">
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="NewFlight" method="flighthotel" query=' {
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "flight",
                        "IP": "[##cms.request.clientip##]",
                        "userAgent": "[##cms.request.user-agent##]",
                        "fromcity": "[##cms.form.from##]",
                        "tocity": "[##cms.form.to##]",
                        "departuredate": "[##cms.form.fdate##]",
                        "returndate": "[##cms.form.tdate##]",
                        "hotelname": "",
                        "checkin": "[##cms.form.checkin##]",
                        "checkout": "[##cms.form.checkout##]",
                        "productid": "[##cms.form.productid##]",
                        "rooms": [##cms.form.rooms##],
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "userid": "0",
                        "classname": ["[##cms.form.FlightClass##]"],
                        "dmnid":"[##cms.cms.domainid##]",
                        "lid": "[##cms.form.clid|(1)##]",
                        "flexible": "0",
                        "unit": "10"
            
                    }
                ]
            }' preview="" />
        </basis>
        [##db.NewFlight.result##]

    </basis>
    <basis core="group" name="has-rkey" if="'[##cms.cookie.rkey##]' <> ''">
        <basis core="dbsource" source="trust_login8" mid="24" name="db" lid="1" rkey="[##cms.cookie.rkey##]">
            <member name="checkrkey" type="scalar" request="userid" preview="" />
        </basis>
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="NewFlight" method="flighthotel" query=' {
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "flight",
                        "IP": "[##cms.request.clientip##]",
                        "userAgent": "[##cms.request.user-agent##]",
                        "fromcity": "[##cms.form.from##]",
                        "tocity": "[##cms.form.to##]",
                        "departuredate": "[##cms.form.fdate##]",
                        "returndate": "[##cms.form.tdate##]",
                        "hotelname": "",
                        "checkin": "[##cms.form.checkin##]",
                        "checkout": "[##cms.form.checkout##]",
                        "productid": "[##cms.form.productid##]",
                        "rooms": [##cms.form.rooms##],
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "userid": "[##db.checkrkey.userid##]",
                        "classname": ["[##cms.form.FlightClass##]"],
                        "dmnid":"[##cms.cms.domainid##]",
                        "lid": "[##cms.form.clid|(1)##]",
                        "flexible": "0",
                        "unit": "10"
            
                    }
                ]
            }' preview="" />
        </basis>
        [##db.NewFlight.result##]
    </basis>
</basis>
<basis core="group" name="check-lang" if="'[##cms.form.clid|(1)##]' = '1'">
    <basis core="group" name="hasNot-rkey" if="'[##cms.cookie.rkey##]' = ''">
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="NewFlight" method="flighthotel" query=' {
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "flight",
                        "IP": "[##cms.request.clientip##]",
                        "userAgent": "[##cms.request.user-agent##]",
                        "fromcity": "[##cms.form.from##]",
                        "tocity": "[##cms.form.to##]",
                        "departuredate": "[##cms.form.fdate##]",
                        "returndate": "[##cms.form.tdate##]",
                        "hotelname": "",
                        "checkin": "[##cms.form.checkin##]",
                        "checkout": "[##cms.form.checkout##]",
                        "productid": "[##cms.form.productid##]",
                        "rooms": [##cms.form.rooms##],
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "userid": "0",
                        "classname": ["[##cms.form.FlightClass##]"],
                        "dmnid":"[##cms.cms.domainid##]",
                        "lid": "[##cms.form.clid|(1)##]",
                        "flexible": "0",
                        "unit": "10"
            
                    }
                ]
            }' preview="" />
        </basis>
        [##db.NewFlight.result##]

    </basis>
    <basis core="group" name="has-rkey" if="'[##cms.cookie.rkey##]' <> ''">
        <basis core="call"  file="Client_CheckRkey.inc"></basis>
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="NewFlight" method="flighthotel" query=' {
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "flight",
                        "IP": "[##cms.request.clientip##]",
                        "userAgent": "[##cms.request.user-agent##]",
                        "fromcity": "[##cms.form.from##]",
                        "tocity": "[##cms.form.to##]",
                        "departuredate": "[##cms.form.fdate##]",
                        "returndate": "[##cms.form.tdate##]",
                        "hotelname": "",
                        "checkin": "[##cms.form.checkin##]",
                        "checkout": "[##cms.form.checkout##]",
                        "productid": "[##cms.form.productid##]",
                        "rooms": [##cms.form.rooms##],
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "userid": "[##db.checkrkey.userid##]",
                        "classname": ["[##cms.form.FlightClass##]"],
                        "dmnid":"[##cms.cms.domainid##]",
                        "lid": "[##cms.form.clid|(1)##]",
                        "flexible": "0",
                        "unit": "10"
            
                    }
                ]
            }' preview="" />
        </basis>
        [##db.NewFlight.result##]
    </basis>
</basis>