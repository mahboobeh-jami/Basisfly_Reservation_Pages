<basis core="group" name="check-lang" if="'[##cms.form.clid|(1)##]' <> '1'">
    <basis core="group" name="hasNot-rkey" if="'[##cms.cookie.rkey##]' = ''">
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="cip" method="cip"  query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "cipsearch",
                        "IP": "[##cms.request.clientip##]",
                        "userAgent": "[##cms.request.user-agent##]",
                        "fromcity": "[##cms.form.from##]",
                        "date": "[##cms.form.fdate##]",
                        "adultcount": "[##cms.form.adult##]",
                        "childcountandage": "[##cms.form.child##][##cms.form.select-age##]",
                        "traveltype": "[##cms.form.traveltype##]",
                        "flighttype": "[##cms.form.flighttype##]",
                        "userid": "0",
                        "dmnid": "[##cms.cms.domainid##]",
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "lid": "[##cms.form.clid|(1)##]",
                        "schemaid":"500",
                        "unit": "10"
                    }
                ]
            } ' preview=""/>
           </basis>
           [##db.cip.result##]
    
    </basis>
    <basis core="group" name="has-rkey" if="'[##cms.cookie.rkey##]' <> ''">
        <basis core="dbsource" source="trust_login8" mid="24" name="db" lid="1" rkey="[##cms.cookie.rkey##]">
            <member name="checkrkey" type="scalar" request="userid" preview="" />
        </basis>
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="cip" method="cip"  query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "cipsearch",
                        "IP": "[##cms.request.clientip##]",
                        "userAgent": "[##cms.request.user-agent##]",
                        "fromcity": "[##cms.form.from##]",
                        "date": "[##cms.form.fdate##]",
                        "adultcount": "[##cms.form.adult##]",
                        "childcountandage": "[##cms.form.child##][##cms.form.select-age##]",
                        "traveltype": "[##cms.form.traveltype##]",
                        "flighttype": "[##cms.form.flighttype##]",
                        "userid": "[##db.checkrkey.userid##]",
                        "dmnid": "[##cms.cms.domainid##]",
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "lid": "[##cms.form.clid|(1)##]",
                        "schemaid":"500",
                        "unit": "10"
                    }
                ]
            } ' preview=""/>
           </basis>
           [##db.cip.result##]
    </basis>
</basis>
<basis core="group" name="check-lang" if="'[##cms.form.clid|(1)##]' = '1'">
    <basis core="group" name="hasNot-rkey" if="'[##cms.cookie.rkey##]' = ''">
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="cip" method="cip"  query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "cipsearch",
                        "IP": "[##cms.request.clientip##]",
                        "userAgent": "[##cms.request.user-agent##]",
                        "fromcity": "[##cms.form.from##]",
                        "date": "[##cms.form.fdate##]",
                        "adultcount": "[##cms.form.adult##]",
                        "childcountandage": "[##cms.form.child##][##cms.form.select-age##]",
                        "traveltype": "[##cms.form.traveltype##]",
                        "flighttype": "[##cms.form.flighttype##]",
                        "userid": "0",
                        "dmnid": "[##cms.cms.domainid##]",
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "lid": "[##cms.form.clid|(1)##]",
                        "schemaid":"500",
                        "unit": "10"
                    }
                ]
            } ' preview=""/>
           </basis>
           [##db.cip.result##]
    
    </basis>
    <basis core="group" name="has-rkey" if="'[##cms.cookie.rkey##]' <> ''">
        <basis core="call" file="Client_CheckRkey.inc"></basis>
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="cip" method="cip"  query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "cipsearch",
                        "IP": "[##cms.request.clientip##]",
                        "userAgent": "[##cms.request.user-agent##]",
                        "fromcity": "[##cms.form.from##]",
                        "date": "[##cms.form.fdate##]",
                        "adultcount": "[##cms.form.adult##]",
                        "childcountandage": "[##cms.form.child##][##cms.form.select-age##]",
                        "traveltype": "[##cms.form.traveltype##]",
                        "flighttype": "[##cms.form.flighttype##]",
                        "userid": "[##db.checkrkey.userid##]",
                        "dmnid": "[##cms.cms.domainid##]",
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "lid": "[##cms.form.clid|(1)##]",
                        "schemaid":"500",
                        "unit": "10"
                    }
                ]
            } ' preview=""/>
           </basis>
           [##db.cip.result##]
    </basis>
</basis>
