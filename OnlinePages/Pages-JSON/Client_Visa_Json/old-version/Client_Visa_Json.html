<basis core="group" name="check-lang" if="'[##cms.form.clid|(1)##]' <> '1'">
    <basis core="group" name="hasNot-rkey" if="'[##cms.cookie.rkey##]' = ''">
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="visa" method="visa" query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "visasearch",
                        "IP": "[##cms.request.clientip##]",
                        "country": "[##cms.form.country##]",
                        "userid": "0",
                        "dmnid": "[##cms.cms.domainid##]",
                         "lid": "[##cms.form.lid|(1)##]",
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "unit": "10"
                    }
                ]
            } ' preview="" />
        </basis>
        [##db.visa.result##]

    </basis>
    <basis core="group" name="has-rkey" if="'[##cms.cookie.rkey##]' <> ''">
        <basis core="dbsource" source="trust_login8" mid="24" name="db" lid="1" rkey="[##cms.cookie.rkey##]">
            <member name="checkrkey" type="scalar" request="userid" preview="" />
        </basis>
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="visa" method="visa" query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "visasearch",
                        "IP": "[##cms.request.clientip##]",
                        "country": "[##cms.form.country##]",
                        "userid": "[##db.checkrkey.userid##]",
                        "dmnid": "[##cms.cms.domainid##]",
                         "lid": "[##cms.form.lid|(1)##]",
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "unit": "10"
                    }
                ]
            } ' preview="" />
        </basis>
        [##db.visa.result##]
    </basis>
</basis>
<basis core="group" name="check-lang" if="'[##cms.form.clid|(1)##]' = '1'">
    <basis core="group" name="hasNot-rkey" if="'[##cms.cookie.rkey##]' = ''">
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="visa" method="visa" query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "visasearch",
                        "IP": "[##cms.request.clientip##]",
                        "country": "[##cms.form.country##]",
                        "userid": "0",
                        "dmnid": "[##cms.cms.domainid##]",
                         "lid": "[##cms.form.lid|(1)##]",
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "unit": "10"
                    }
                ]
            } ' preview="" />
        </basis>
        [##db.visa.result##]

    </basis>
    <basis core="group" name="has-rkey" if="'[##cms.cookie.rkey##]' <> ''">
        <basis core="call" file="Client_CheckRkey.inc"></basis>
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="visa" method="visa" query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "visasearch",
                        "IP": "[##cms.request.clientip##]",
                        "country": "[##cms.form.country##]",
                        "userid": "[##db.checkrkey.userid##]",
                        "dmnid": "[##cms.cms.domainid##]",
                         "lid": "[##cms.form.lid|(1)##]",
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "unit": "10"
                    }
                ]
            } ' preview="" />
        </basis>
        [##db.visa.result##]
    </basis>
</basis>