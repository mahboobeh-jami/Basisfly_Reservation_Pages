<basis core="group" name="hasNot-rkey" if="'[##cms.cookie.rkey##]' = ''">
    <basis core="group" name="" if="'[##cms.form.data_type##]' = 'panel'">
        <basis core="group" name="" if="'[##cms.form.data_type_tour##]' = '10'">
            <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
                <member name="toursearch" method="tour_final"
                postsql="select replace(replace(replace(replace(replace(replace(result,'None',' '),'undefined','null'),'\xa0',' '),' nan','null'),' inf','null'),' -inf' , 'null') as 'result' from [db.toursearch]"
                query='{
                    "name": "db",
                    "mid": "20",
                    "member": [
                        {
                            "type": "list",
                            "name": "q",
                            "request": "toursearchfinal",
                            "basiscoreid": "[##cms.form.tourname##]",
                            "tourid": "",
                            "tourname": "",
                            "fromdate": "[##cms.form.fdate##]",
                            "todate": "[##cms.form.tdate##]",
                            "trackingNo": "[##cms.cookie.trackingid##]",
                            "rooms": [##cms.form.rooms##],
                            "userid": "0",
                            "lid": "[##cms.form.clid|(1)##]",
                            "unit": "10",
                            "neardate": "1",
                            "flexible": "0"
                        }
                    ]
                } ' preview="" />
            </basis>
            [##db.toursearch.result##]
        </basis>
        <basis core="group" name="" if="'[##cms.form.data_type_tour##]' = '4'">
            <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
                <member name="toursearch" method="tour_final"
                postsql="select replace(replace(replace(replace(replace(replace(result,'None',' '),'undefined','null'),'\xa0',' '),' nan','null'),' inf','null'),' -inf' , 'null') as 'result' from [db.toursearch]"
                query='{
                    "name": "db",
                    "mid": "20",
                    "member": [
                        {
                            "type": "list",
                            "name": "q",
                            "request": "toursearchfinal",
                            "basiscoreid": "",
                            "tourid": "[##cms.form.tourname##]",
                            "tourname": "",
                            "fromdate": "[##cms.form.fdate##]",
                            "todate": "[##cms.form.tdate##]",
                            "trackingNo": "[##cms.cookie.trackingid##]",
                            "rooms": [##cms.form.rooms##],
                            "userid": "0",
                            "lid": "[##cms.form.clid|(1)##]",
                            "unit": "10",
                            "neardate": "1",
                            "flexible": "0"
                        }
                    ]
                } ' preview="" />
            </basis>
            [##db.toursearch.result##]
        </basis>
    </basis>
    <basis core="group" name="" if="'[##cms.form.data_type##]' <>'panel'">
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="toursearch" method="tour_final"
            postsql="select replace(replace(replace(replace(replace(replace(result,'None',' '),'undefined','null'),'\xa0',' '),' nan','null'),' inf','null'),' -inf' , 'null') as 'result' from [db.toursearch]"
            query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "toursearchfinal",
                        "basiscoreid": "",
                        "tourname": "[##cms.form.tourname##]",
                        "tourid": "",
                        "fromdate": "[##cms.form.fdate##]",
                        "todate": "[##cms.form.tdate##]",
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "rooms": [##cms.form.rooms##],
                        "userid": "0",
                        "lid": "[##cms.form.clid|(1)##]",
                        "unit": "10",
                        "neardate": "1",
                        "flexible": "0"
                    }
                ]
            } ' preview="" />
        </basis>
        [##db.toursearch.result##]
    </basis>

</basis>
<basis core="group" name="has-rkey" if="'[##cms.cookie.rkey##]' <> ''">
    <basis core="call" lid="3" file="Client_CheckRkey.inc"></basis>
    <basis core="group" name="" if="'[##cms.form.data_type##]' = 'panel'">
        <basis core="group" name="" if="'[##cms.form.data_type_tour##]' = '10'">
            <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
                <member name="toursearch" method="tour_final"
                postsql="select replace(replace(replace(replace(replace(replace(result,'None',' '),'undefined','null'),'\xa0',' '),' nan','null'),' inf','null'),' -inf' , 'null') as 'result' from [db.toursearch]"
                query='{
                    "name": "db",
                    "mid": "20",
                    "member": [
                        {
                            "type": "list",
                            "name": "q",
                            "request": "toursearchfinal",
                            "basiscoreid": "[##cms.form.tourname##]",
                            "tourid": "",
                            "tourname": "",
                            "fromdate": "[##cms.form.fdate##]",
                            "todate": "[##cms.form.tdate##]",
                            "trackingNo": "[##cms.cookie.trackingid##]",
                            "rooms": [##cms.form.rooms##],
                            "userid": "[##db.checkrkey.userid##]",
                            "lid": "[##cms.form.clid|(1)##]",
                            "unit": "10",
                            "neardate": "1",
                            "flexible": "0"
                        }
                    ]
                } ' preview="" />
            </basis>
            [##db.toursearch.result##]
        </basis>
        <basis core="group" name="" if="'[##cms.form.data_type_tour##]' = '4'">
            <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
                <member name="toursearch" method="tour_final"
                postsql="select replace(replace(replace(replace(replace(replace(result,'None',' '),'undefined','null'),'\xa0',' '),' nan','null'),' inf','null'),' -inf' , 'null') as 'result' from [db.toursearch]"
                query='{
                    "name": "db",
                    "mid": "20",
                    "member": [
                        {
                            "type": "list",
                            "name": "q",
                            "request": "toursearchfinal",
                            "basiscoreid": "",
                            "tourid": "[##cms.form.tourname##]",
                            "tourname": "",
                            "fromdate": "[##cms.form.fdate##]",
                            "todate": "[##cms.form.tdate##]",
                            "trackingNo": "[##cms.cookie.trackingid##]",
                            "rooms": [##cms.form.rooms##],
                            "userid": "[##db.checkrkey.userid##]",
                            "lid": "[##cms.form.clid|(1)##]",
                            "unit": "10",
                            "neardate": "1",
                            "flexible": "0"
                        }
                    ]
                } ' preview="" />
            </basis>
            [##db.toursearch.result##]
        </basis>
    </basis>
    <basis core="group" name="" if="'[##cms.form.data_type##]' <>'panel'">
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="toursearch" method="tour_final"
            postsql="select replace(replace(replace(replace(replace(replace(result,'None',' '),'undefined','null'),'\xa0',' '),' nan','null'),' inf','null'),' -inf' , 'null') as 'result' from [db.toursearch]"
            query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "name": "q",
                        "request": "toursearchfinal",
                        "basiscoreid": "",
                        "tourname": "[##cms.form.tourname##]",
                        "tourid": "",
                        "fromdate": "[##cms.form.fdate##]",
                        "todate": "[##cms.form.tdate##]",
                        "trackingNo": "[##cms.cookie.trackingid##]",
                        "rooms": [##cms.form.rooms##],
                        "userid": "[##db.checkrkey.userid##]",
                        "lid": "[##cms.form.clid|(1)##]",
                        "unit": "10",
                        "neardate": "1",
                        "flexible": "0"
                    }
                ]
            } ' preview="" />
        </basis>
        [##db.toursearch.result##]
    </basis>
</basis>