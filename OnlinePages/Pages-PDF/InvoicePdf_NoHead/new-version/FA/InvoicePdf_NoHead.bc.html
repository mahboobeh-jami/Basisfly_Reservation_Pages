<basis core="group" name="check-version" if="'[##cms.cms.server_main_version##]' = '4'">
    <basis core="call" lid="1" file="Client_CheckRkey.inc"></basis> <!-- updated login -->

    <basis core="group" if="[##db.checkrkey.userid##]=0  ">
        <!DOCTYPE html>
        <html>
            <head>
                <meta charset="UTF-8"/>
                <title>Invoice</title>
            </head>
            
            <body>
                <p style="text-align:center">شما مجاز به دسترسی نمی باشید</p>
                <p style="text-align:center">You are not allowed to access this page</p>
                <style type="text/css">
                    @font-face{
                        font-family:'IRANSansWeb';
                        src:url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.eot');src:local('?'),
                        url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.woff2') format("woff"),
                        url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.ttf') format("truetype"),
                        url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.otf') format("otf");
                        font-weight:400;font-style:normal
                    }
                    body{font-family:IRANSansWeb;font-size:16px;color:#3b3838;}
                </style>
            </body>
        </html>
    </basis>
    
    <basis core="group" if="[##db.checkrkey.userid##]<>0">
        <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource" > 
            <member method="cms"
            name="InvoiceView" 
            query='
            { 
                "name": "db", 
                "mid": "20", 
                "member":
                [
                    { 
                        "name": "q", 
                        "type":"list", 
                        "request":"invoiceview", 
                        "id":"[##cms.query.id##]"
    
    
                    }
                ] 
            }'/> 
        </basis>
    
        <basis core="group" name="Delay_2">
            <basis core='inlinesource' name='db'>
                <member name="InvoiceView_Tree" format="json"preview="">{"root":[##db.InvoiceView.result##]}</member>
                <member 
                    name='InvoiceOwnerid'  
                    format="json" 
                    postsql="select value from [db.InvoiceOwnerid] where Field = 'ownerid'"
                    preview=""> 
                    {"root":[##db.InvoiceView.result##]}
                </member>
    
                <member 
                    name='InvoiceOpen'  
                    format="json" 
                    postsql="select value from [db.InvoiceOpen] where Field = 'open'"
                    preview=""> 
                    {"root":[##db.InvoiceView.result##]}
                </member>       
    
                <member 
                    name='InvoiceType'  
                    format="json" 
                    postsql="select value from [db.InvoiceType] where Field = 'invoicetype'"
                    preview=""> 
                    {"root":[##db.InvoiceView.result##]}
                </member>           
            </basis>
    
            <basis core="dbsource" source="basiscore" mid="5" name="db" lid="1" usedforid="[##db.InvoiceOwnerid.Value##]" > 
            <member type="view" name="AgancyName" postsql="select Answer from [db.AgancyName] where typeid=150"/></basis>
    
            <html>
                <head>
                    <title>Invoice</title>
                    <meta charset="utf-8"> 
                </head>
    
                <body>
                    <div class="Panel_pdf">
                        <div class="pdf_title">
                            <basis:00 core="group" if="[##db.InvoiceOpen.Value|(0)##]=0">
                            <basis:02 core="group" if="[##cms.query.status|(0)##]=0">
                            
                            <div>قرارداد</basis:02>
                            <basis:03 core="group" if="[##cms.query.status|(0)##]=1">
                            
                            <div>پیش قرارداد</basis:03>
                            </basis:00>
                            <basis:01 core="group" if="[##db.InvoiceOpen.Value|(0)##]=1"><div>پیش قرارداد</basis:01>
                            ارائه خدمات مسافرتی و گردشگري </div>
                        </div>
                        <div class="pdf_description">
                            <div><span>شماره : </span>[##cms.query.id##]</div>                  
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null"> 
                                <face filter="Field in ('invoiceDate','account','products','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('invoiceDetails')">@child</face>
                                <face filter="Field in ('counterName')"><div>نام کانتر : <span> @value</span> </div></face>    
                                <face filter="type in ('Array','object')">@Child</face>                                
                            </basis>
    
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('travelDate','invoiceDetails','products','creditPay')"></face>
                                <face filter="Field in ('invoiceDate')">
                                    <div class="invoice_Details">تاریخ ثبت قرارداد : @child</div>
                                </face>
    
                                <face filter="Field in ('mstring')"><span>@value</span></face>
                                <face filter="Field in ('sstring')"><span style="margin:0 8px;">(@value)</span></face>
                                <face filter="type in ('Array','object')">@Child</face>    
                            </basis>
                                
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('baggage')"></face>
                                <face filter="Field in ('title')"><div style="direction:rtl;"><span>نوع خدمات : </span> @value</div></face>    
                                <face filter="type in ('Array','object')">@Child</face>                                
                            </basis>
                        </div>
    
                        <div class="pdf_description">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null"> 
                                <face filter="Field in ('invoiceDetails','invoiceDate','products','passengers','passengersvisa','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('account','person')">@child</face>
    
                                <face filter="Field in ('firstname')">این قرارداد فی مابین خانم/ آقاي @value </face>
                                <face filter="Field in ('lastname')">@value </face>
                                <face filter="Field in ('address')"> به نشانی ( @value ) </face>
                                <face filter="Field in ('tel')"> داراي شماره تلفن ثابت <span class="pdf_direct"> ( @value ) </span></face>
                                <face filter="Field in ('mobile')"> و همراه <span class="pdf_direct">( @value ) </span></face>
    
                                <face filter="Field in ('agencyname')">این قرار داد فی مابین @value</face>
                                <face filter="Field in ('agencymanegername')"> با مدیریت @value</face>
                                <face filter="Field in ('agencytell')"> به شماره تماس <span class="pdf_direct"> ( @value ) </span></face>
    
                                <face filter="type in ('Array','object')">@Child</face>                                                
                            </basis>
    
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null"> 
                                <face filter="Field in ('invoiceDate','account','products','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('invoiceDetails')">@child</face>
                                <face filter="Field in ('persons')"> 
                                    منفرداً یا به نمایندگی تام الاختیار از سوي افراد ذیل جمعاً به تعداد @value نفر که از این پس "گردشگر" نامیده میشود از یک طرف و دفتر <strong>[##db.AgancyName.Answer##]</strong> که از این پس "کارگزار" نامیده میشود , به صورت <strong> خرید اینترنتی </strong>  منعقد گردیده است.
                                </face>
    
                                <face filter="type in ('Array','object')">@Child</face>                                                
                            </basis>
                        </div>
                        <!-- products ############################################################################################# -->     
                        <!-- type == 1 -->
                        <basis:1 core="group" if="[##db.InvoiceType.Value##] in ('1')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات پرواز </span> / <span>FLIGHT INFORMATION</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>مبدا - مقصد</span><span>FROM - TO</span></th>
                                                <th><span>تاریخ</span><span>DATE</span></th>
                                                <th><span>زمان خروج</span><span>EXit TIME</span></th>
                                                <th><span>زمان ورود</span><span>ARRIVAL TIME</span></th>
                                                <th><span>نام ایرلاین</span><span>AIRLINE</span></th>
                                                <th><span>فرودگاه مبدا</span><span>DEPARTURE AIRPORT</span></th>
                                                <th><span>فرودگاه مقصد</span><span>DESTINATION AIRPORT</span></th>
                                                <th><span>شماره پرواز</span><span>FLIGHT NO</span></th>
                                                <th><span>کلاس پروازی</span><span>FLIGHT CLASS</span></th>                                                    
                                            </tr>
                                        </thead>
    
                                        <tbody>@child</tbody>
                                    </table>
                                </face>
                                                                        
                                <face filter="Field in ('route') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('route') and type in ('scalar.String')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="Field in ('etime','atime','class','routecode') and type in ('scalar.String')"><td>@value</td></face>
                                
                                <face filter="Field in ('airline')"><td>@value</td></face>                                      
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:8px">(@value)</div></face>
    
                                <face filter="Field in ('startairport','endairport')"><td style="font-family:IRANSansWeb;">@Child</td></face>
                                <face filter="Field in ('airport')"><div>@value</div></face>
                                <face filter="Field in ('startotherinfo')"><div>@Child</div></face>
                                <face filter="Field in ('shortname')">@value | </face>           
                                <face filter="Field in ('city')">@value</face>      
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:1>
    
                        <!-- type == 2 -->
                        <basis:2 core="group" if="[##db.InvoiceType.Value##] in ('2','4','6')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات پرواز</span> / <span>FLIGHT INFORMATION</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>مبدا - مقصد</span><span>FROM - TO</span></th>
                                                <th><span>تاریخ</span><span>DATE</span></th>
                                                <th><span>زمان خروج</span><span>EXit TIME</span></th>
                                                <th><span>زمان ورود</span><span>ARRIVAL TIME</span></th>
                                                <th><span>نام ایرلاین</span><span>AIRLINE</span></th>
                                                <th><span>فرودگاه مبدا</span><span>DEPARTURE AIRPORT</span></th>
                                                <th><span>فرودگاه مقصد</span><span>DESTINATION AIRPORT</span></th>
                                                <th><span>شماره پرواز</span><span>FLIGHT NO</span></th>
                                                <th><span>کلاس پروازی</span><span>FLIGHT CLASS</span></th>                                                      
                                            </tr>
                                        </thead>
    
                                        @child
                                    </table>
                                </face>
    
                                <face filter="Field in ('hotel','transfer','insurance','transfers','services')"></face>
                                <face filter="Field in ('departure') and type in ('array')">
                                    <tbody>
                                        <tr>
                                            <td colspan="10" style="background:#FFF4E3;text-align:right;padding-right:22px;font-family:IRANSansWeb">
                                                Departure Information /  مسیر رفت 
                                            </td>
                                        </tr>
                                        @child  
                                    </tbody>                 
                                </face> 
    
                                <face filter="Field in ('return') and type in ('array')">
                                    <tbody>
                                        <tr>
                                            <td colspan="10" style="background:#FFF4E3;text-align:right;padding-right:22px;font-family:IRANSansWeb">
                                                Return Information /  مسیر برگشت 
                                            </td>
                                        </tr>
                                        @child
                                    </tbody>
                                </face>  
    
                                <face filter="Field in ('route') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('route') and type in ('scalar.String')"><td style="font-family:IRANSansWeb">@value</td></face>
                                <face filter="Field in ('etime','atime','class','routecode') and type in ('scalar.String')"><td>@value</td></face>
                                <face filter="Field in ('airline')"><td>@value</td></face>
                                            
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:8px">(@value)</div></face>
    
                                <face filter="Field in ('startairport','endairport')"><td style="font-family:IRANSansWeb">@Child</td></face>
                                <face filter="Field in ('airport')"><div>@value</div></face>
                                <face filter="Field in ('startotherinfo')"><div>@Child</div></face>
                                <face filter="Field in ('shortname')">@value | </face>           
                                <face filter="Field in ('city')">@value</face>      
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:2>
    
                        
    
                        <!-- type == 3 -->
                        <basis:3 core="group" if="[##db.InvoiceType.Value##] in ('3','4','6','10')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>لیست اتاق ها</span> / <span>LIST OF ROOMS</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>نام هتل</span><span>HOTEL NAME</span></th>
                                                <th><span>درجه هتل</span><span>HOTEL GRADE</span></th>
                                                <th><span>شهر</span><span>CITY</span></th>
                                                <th><span>اتاق</span><span>ROOM</span></th>
                                                <th><span>نوع اتاق</span><span>ROOM TYPE</span></th>
                                                <th><span>تاریخ ورود</span><span>CHECK IN</span></th>
                                                <th><span>تاریخ خروج</span><span>CHECK OUT</span></th>
                                                <th><span>مسافران</span><span>PASSENGERS</span></th>
                                                <th><span>خدمات</span><span>SERVICES</span></th>                                                    
                                            </tr>
                                        </thead>
    
                                        @child
                                    </table>
                                </face>
                                
                                <face filter="Field in ('departure','return','transfer','insurance','transfers','services')"></face>
                                <face filter="Field in ('hotel') and type in ('array')">
                                    <tbody>
                                        <tr><td colspan="9" style="background:#FFF4E3;text-align:right;padding:15px 0"></td></tr>
                                        @child 
                                    </tbody>                  
                                </face>
                                
                                <face filter="Field in ('room')"><tr>@Child</tr></face>
                                <face filter="Field in ('hotelName','cityName','roomNumber','roomType','service')"><td>@value</td></face>                
                                <face filter="Field in ('hotelStar')"><td>@value</td></face>
    
                                <face filter="Field in ('fromDate','toDate','passengers')"><td>@child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:8px">(@value)</div></face>
    
                                <face filter="Field in ('passengersRoom')"><td>@child</td></face>
                                <face filter="Field in ('adult')"><span class="passengers">@value Adult</span></face>
                                <face filter="Field in ('child Withbed') and value <> '0'"><span class="passengers">@value Child</span></face>
                                <face filter="Field in ('child Withoutbed') and value <> '0'"><span class="passengers">@value Child (WOB)</span></face>
                                <face filter="Field in ('infant') and value <> '0'"><span class="passengers">@value Infant</span></face>
                                <face filter="Field in ('extra Adult') and value <> '0'"><span class="passengers">@value Extra Adult</span></face>
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:3>
    
                        <basis:333 core="group" if="'[##db.InvoiceType.Value##]' in ('3','6')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>             
                                <face filter="Field in ('products')">
                                   @child
                                </face>
    
                                <face filter="Field in ('departure','return','transfer','insurance','hotel','transfers')"></face>
                                <face filter="Field in ('services') and type in ('array') and value <> '[]'">
                                     <table class="invoice_tbl product_tbl">
                                        <caption class="invoice_caption"><p>مشخصات محصول - (اطلاعات  خدمات وگشت)</p></caption>
                                        <thead>
                                            <tr>            
                                               
                                                <td>نام مسافر</td>
                                                 <td>نام خدمات</td>
                                                  <td>وب سرویس</td>
                                                <td>قیمت کل</td>
                                                <td>واحد</td>
                                                                                                    
                                            </tr>
                                        </thead>
    
                                        <tbody class="invoice_tbody"> @child</tbody>
                                    </table>              
                                </face>
                                
                                <face filter="Field in ('service')"><tr>@Child</tr></face>
                                <face filter="Field in ('service_passengerlist')"><td>@Child</td></face>
                                <face filter="Field in ('servicename')"><td>@value</td></face>
                                <face filter="Field in ('webservices')"><td>@child</td></face>
                                <face filter="Field in ('webservice')">@value</face>
                                <face filter="Field in ('refnumber')">/@value</face>
                                <face filter="Field in ('servicecost')"><td>@value</td></face>
                                <face filter="Field in ('serviceunit')"><td>@value</td></face>
                                <face filter="Field in ('firstname')"><div><span>@value-</span></face>
                                <face filter="Field in ('lastname')"><span>@value</span></div></face>
    
                                           
                                <face filter="Field in ('cancel') and value ='1'">
                                   
                                        <input type="hidden" name="" class="canceli" value="1">
                                </face>
                                <face filter="Field in ('cancel') and value ='0'">
                                  
                                        <input type="hidden" name="" class="canceli" value="0">
                                </face>   
    
                                <face filter="Field in ('error') and value ='1'">
                                      <td class="Webervice_Refnumber">
                                        <div>ناموفق</div>
                                        <div>
                                            <a href="/reservation/invoice/Get_Refnumber.bc?id=[##cms.form.id##]&type=3&clear=[##cms.form.clear##]" class="Webervice_Link" title="صدور هتل">
                                                صدور هتل
                                                <i class="fa fa-external-link-square-alt"></i>
                                            </a>
                                        </div>
                                    </td>
                                </face>                
                            
    
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
    
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>             
                                <face filter="Field in ('products')">
                                   @child
                                </face>
    
                                <face filter="Field in ('departure','return','transfer','insurance','hotel','services')"></face>
                                <face filter="Field in ('transfers')">
                                     <table class="invoice_tbl product_tbl">
                                        <caption class="invoice_caption"><p>مشخصات محصول - (اطلاعات   ترنسفر)</p></caption>
                                        <thead>
                                            <tr>            
                                               
                                                <td>نام خدمات</td>
                                                 <td>نام ترنسفر</td>
                                                <td>نوع ترنسفر</td>
                                                <td>فرودگاه</td>
    
                                                <td>تاریخ پرواز رفت</td>
                                                <td>تاریخ پرواز برگشت</td>
                                                <td>کدمسیر  رفت</td>
                                                <td>کدمسیربرگشت</td>
    
                                                <td>ساعت پرواز  رفت</td>
                                                <td>ساعت پرواز برگشت</td>
                                                 <td>وب سرویس</td>
                                                 <td>قیمت کل</td>
                                                  <td>واحد</td>
                                                                                                    
                                            </tr>
                                        </thead>
    
                                        <tbody class="invoice_tbody"> <tr>@Child</tr></tbody>
                                    </table>              
                                </face>
                                
                                
                                <face filter="Field in ('t_servicename')"><td>@value</td></face>
                                <face filter="Field in ('transfername')"><td>@value</td></face>
                                <face filter="Field in ('routename')"><td>@value</td></face>
                                <face filter="Field in ('airport')"><td>@value</td></face>
                                <face filter="Field in ('departure_Date')"><td>@value</td></face>
                                <face filter="Field in ('return_Date')"><td>@value</td></face>
                                <face filter="Field in ('departure_routecode')"><td>@value</td></face>
                                <face filter="Field in ('return_routecode')"><td>@value</td></face>
                                <face filter="Field in ('departure_hour')"><td>@value</td></face>
                                <face filter="Field in ('return_hour')"><td>@value</td></face>
                                <face filter="Field in ('transfercost')"><td>@value</td></face>
                                <face filter="Field in ('transferunit')"><td>@value</td></face>
                                 <face filter="Field in ('webservices')"><td>@child</td></face>
                                <face filter="Field in ('webservice')">@value</face>
                                <face filter="Field in ('refnumber')">/@value</face>
    
    
                                           
                                <face filter="Field in ('cancel') and value ='1'">
                                   
                                        <input type="hidden" name="" class="canceli" value="1">
                                </face>
                                <face filter="Field in ('cancel') and value ='0'">
                                  
                                        <input type="hidden" name="" class="canceli" value="0">
                                </face>   
    
                                <face filter="Field in ('error') and value ='1'">
                                      <td class="Webervice_Refnumber">
                                        <div>ناموفق</div>
                                        <div>
                                            <a href="/reservation/invoice/Get_Refnumber.bc?id=[##cms.form.id##]&type=3&clear=[##cms.form.clear##]" class="Webervice_Link" title="صدور هتل">
                                                صدور هتل
                                                <i class="fa fa-external-link-square-alt"></i>
                                            </a>
                                        </div>
                                    </td>
                                </face> 
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
    
                        </basis:333>
    
                        <!-- type == 4 -->
                        <basis:4 core="group" if="[##db.InvoiceType.Value##] in ('4')">
                            <!-- city Transfer in tour -->
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('transfer') and value <> '[]'">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات ترنسفر بین شهری</span> / <span>INTERURBAN TRANSFER INFORMATION</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>مبدا - مقصد</span><span>FROM - TO</span></th>
                                                <th><span>تاریخ</span><span>DATE</span></th>
                                                <th><span>زمان خروج</span><span>EXit TIME</span></th>
                                                <th><span>زمان ورود</span><span>ARRIVAL TIME</span></th>
                                                <th><span>نام ایرلاین</span><span>AIRLINE</span></th>
                                                <th><span>فرودگاه مبدا</span><span>DEPARTURE AIRPORT</span></th>
                                                <th><span>فرودگاه مقصد</span><span>DESTINATION AIRPORT</span></th>
                                                <th><span>شماره پرواز</span><span>FLIGHT NO</span></th>
                                                <th><span>کلاس پروازی</span><span>FLIGHT CLASS</span></th>                                                       
                                            </tr>
                                        </thead>
    
                                        <tbody>@child</tbody>
                                    </table>
                                </face>
                                
                                <face filter="Field in ('departure','return','hotels','insurance')"></face>  
                                <face filter="Field in ('route') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('route') and type in ('scalar.String')"><td style="font-family:IRANSansWeb">@value</td></face>
                                <face filter="Field in ('etime','atime','class','routecode') and type in ('scalar.String')"><td>@value</td></face>
                                <face filter="Field in ('airline')"><td>@value</td></face>
                                
                                            
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:8px">(@value)</div></face>
    
                                <face filter="Field in ('startairport','endairport')"><td>@Child</td></face>
                                <face filter="Field in ('airport')"><div>@value</div></face>
                                <face filter="Field in ('startotherinfo')"><div>@Child</div></face>
                                <face filter="Field in ('shortname')">@value | </face>           
                                <face filter="Field in ('city')">@value</face>     
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>                                  
    
                            <!-- insurance in tour -->            
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face> 
                                <face filter="Field in ('products')">@Child</face>                                     
                                <face filter="Field in ('insurance') and value <> '[]'">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات بیمه</span> / <span>INSURANCE INFORMATION</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>کشور</span><span>COUNTRY</span></th>
                                                <th><span>نوع بیمه</span><span>INSURANCE TYPE</span></th>
                                                <th><span>شرکت بیمه کننده</span><span>INSURANCE COMPANY</span></th>                                                  
                                            </tr>
                                        </thead>
    
                                        <tbody><tr>@child</tr></tbody>
                                    </table>
                                </face>
    
                                <face filter="Field in ('insuranceCountry','insuranceName','insuranceProvider')"><td style="font-family:IRANSansWeb;">@value</td></face>    
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
    
                            <!-- tourDetails in tour -->
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate')"></face> 
                                <face filter="Field in ('products')">@Child</face>                                     
                                <face filter="Field in ('tourDetails') and value <> '{}'">
                                    <table class="invoice_tbl tourDetails">
                                        <colgroup>
                                            <col width="20%"></col>
                                            <col width="80%"></col>
                                        </colgroup>
                                       <caption class="invoice_caption"><span>جزئیات تور </span> / <span>TOUR INFORMATION </span></caption>
                                        <tbody>@child</tbody>
                                    </table>
                                </face>
    
                                <face filter="Field in ('type') and type in ('array')">
                                    <tr>
                                        <td><span>نوع تور</span><span>TOUR TYPE</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face> 
    
                                <face filter="Field in ('appropriate') and type in ('array')">
                                    <tr>
                                        <td><span>مناسب برای</span><span>SUITABLE FOR</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('diff') and type in ('array')">
                                    <tr>
                                        <td><span>سطح سختی</span><span>HARDNESS LEVEL</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('tool') and type in ('array')">
                                    <tr>
                                        <td><span>ملزومات مورد نیاز</span><span>REQUIRED REQUIREMENTS</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('service11') and type in ('array')">
                                    <tr>
                                        <td><span>خدمات رایگان</span><span>FREE SERVICES</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('journey') and type in ('array')">
                                    <tr>
                                        <td><span>برنامه سفر</span><span>ITINERARY</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('description') and type in ('array')">
                                    <tr>
                                        <td><span>توضیحات</span><span>DESCRIPTION</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('servicename','decs')"><span class="serviceName">@value</span></face>
                                <face filter="Field in ('journeytitle')"><span class="serviceName">@value : </face>
                                <face filter="Field in ('journeydesc')"> @value</span></face>
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:4>
    
                        <!-- type == 5 -->
                        <basis:5 core="group" if="[##db.InvoiceType.Value##] in ('5','6')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">@Child</face>                                     
                                <face filter="Field in ('insurance')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات بیمه</span> / <span>INSURANCE INFORMATION</span></caption>
                                        <thead>
                                            <tr> 
                                                <th><span>کشور</span><span>COUNTRY</span></th>
                                                <th><span>نام بیمه</span><span>INSURANCE NAME</span></th>
                                                <th><span>مدت زمان</span><span>PERIOD OF TIME</span></th>
                                                <th><span>شرکت بیمه کننده</span><span>INSURANCE COMPANY</span></th>             
                                                       
                                            </tr>
                                        </thead>
    
                                        <tbody><tr>@child</tr></tbody>
                                    </table>
                                </face>
    
                                <face filter="Field in ('departure','return','hotel')"></face>
                                <face filter="Field in ('country','name','Provider')"><td style="font-family:IRANSansWeb">@value</td></face>    
                                <face filter="Field in ('duration') and type in ('object')"><td style="direction:rtl;font-family:IRANSansWeb">@child</td></face>    
                                <face filter="Field in ('duration') and type in ('Scalar.String')"><span style="margin:0 2px"> @value</span></face>    
                                <face filter="Field in ('durationtype') and type in ('Scalar.String')"><span> @value</span></face>    
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:5>
    
                        <!-- products type == 8 -->
                        <basis:6 core="group" if="[##db.InvoiceType.Value##] in ('8')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات قطار یکطرفه</span> / <span>ONE-WAY TRAIN INFORMATION</span></caption>
                                        <thead>
                                            <tr> 
                                                <th><span>مبدا - مقصد</span><span>FROM - TO</span></th>
                                                <th><span>تاریخ</span><span>DATE</span></th>
                                                <th><span>زمان خروج</span><span>EXit TIME</span></th>
                                                <th><span>زمان ورود</span><span>ARRIVAL TIME</span></th>
                                                <th><span>نام شرکت</span><span>COMAPANY</span></th>
                                                <th><span>ایستگاه مبدا</span><span>DEPARTURE STATION</span></th>
                                                <th><span>ایستگاه مقصد</span><span>DESTINATION STATION</span></th>
                                                <th><span>شماره قطار</span><span>TRAIN NO</span></th>
                                                <th><span>کلاس قطار</span><span>TRAIN CLASS</span></th>              
                                            </tr>
                                        </thead>
    
                                        <tbody>@child</tbody>
                                    </table>
                                </face>
                                
                                <face filter="Field in ('route') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('route','etime','atime','class','routecode') and type in ('scalar.String')">
                                    <td style="direction:rtl">@value</td>
                                </face>
    
                                <face filter="Field in ('trainid')"><td>@value</td></face>
                                            
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:8px">(@value)</div></face>
    
                                <face filter="Field in ('startairport','endairport')"><td>@Child</td></face>
                                <face filter="Field in ('airport')"><div>@value</div></face>
                                <face filter="Field in ('startotherinfo')"><div>@Child</div></face>
                                <face filter="Field in ('shortname')">@value | </face>           
                                <face filter="Field in ('city')">@value</face>      
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:6>
    
                        <!-- products type == 9 -->
                        <basis:7 core="group" if="'[##db.InvoiceType.Value##]' in ('9')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات قطار دوطرفه </span> / <span>ROUND-TRIP TRAIN INFORMATION</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>مبدا - مقصد</span><span>FROM - TO</span></th>
                                                <th><span>تاریخ</span><span>DATE</span></th>
                                                <th><span>زمان خروج</span><span>EXit TIME</span></th>
                                                <th><span>زمان ورود</span><span>ARRIVAL TIME</span></th>
                                                <th><span>نام شرکت</span><span>COMAPANY</span></th>
                                                <th><span>ایستگاه مبدا</span><span>DEPARTURE STATION</span></th>
                                                <th><span>ایستگاه مقصد</span><span>DESTINATION STATION</span></th>
                                                <th><span>شماره قطار</span><span>TRAIN NO</span></th>
                                                <th><span>کلاس قطار</span><span>TRAIN CLASS</span></th>                                                     
                                            </tr>
                                        </thead>
    
                                        @child
                                    </table>
                                </face>
    
                                <face filter="Field in ('hotel','transfer','insurance')"></face>
                                <face filter="Field in ('departure') and type in ('array')">
                                    <tbody>
                                        <tr>
                                            <td colspan="10" style="background:#FFF4E3;text-align:right;padding-right:22px;font-family:IRANSansWeb">
                                                Departure Information /  مسیر رفت  
                                            </td>
                                        </tr>
                                        @child  
                                    </tbody>                 
                                </face> 
    
                                <face filter="Field in ('return') and type in ('array')">
                                    <tbody>
                                        <tr>
                                            <td colspan="10" style="background:#FFF4E3;text-align:right;padding-right:22px;font-family:IRANSansWeb">
                                                 Return Information /  مسیر برگشت 
                                            </td>
                                        </tr>
                                        @child
                                    </tbody>
                                </face>   
    
                                <face filter="Field in ('route') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('route','etime','atime','class','routecode') and type in ('scalar.String')"><td style="direction:rtl">@value</td></face>
                                <face filter="Field in ('trainid')"><td>@value</td></face>
                                        
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:8px">(@value)</div></face>
    
                                <face filter="Field in ('startairport','endairport')"><td>@Child</td></face>
                                <face filter="Field in ('airport')"><div>@value</div></face>
                                <face filter="Field in ('startotherinfo')"><div>@Child</div></face>
                                <face filter="Field in ('shortname')">@value | </face>           
                                <face filter="Field in ('city')">@value</face>       
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:7>
    
                           <!-- passengesr ########################################################################################### -->
                           <basis core="group" if="[##db.InvoiceType.Value##] not in ('13')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">   
                                <face filter="Field in ('invoiceDetails','invoiceDate','products','account','priceDetails','baggages','bill','creditPay','passengersvisa')"></face>
                                <face filter="Field in ('passengers')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>لیست مسافران</span> / <span>PASSENGERS INFORMATION</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>نام</span> <span>NAME</span></th>
                                                <th><span>نام خانوادگی</span><span>SURNAME</span></th>
                                                <th><span>تاریخ تولد</span><span>DATE OF BIRTH</span></th>
                                                <th><span>کدملی</span><span>NATIONAL CODE</span></th>
                                                <th><span>کد پاسپورت</span><span>PASSPORT NO</span></th>
                                                <th><span>اعتبار پاسپورت</span><span>EXPIRATION DATE OF PASSPORT</span></th>
                                                <th><span>جنسیت</span><span>GENDER</span></th>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                            </tr>
                                        </thead>
                                        <tbody class="invoice_tbody">@Child</tbody>
                                    </table>
                                </face>       
        
                                <face filter="Field in ('passengerinfo')"><tr>@child</tr></face> 
                                <face filter="Field in ('firstname','lastname','nationalcode','passportcode','passportexpiration')"><td>@value</td></face>        
        
                                <face filter="Field in ('birthdate') and type in ('object')"><td>@child</td></face>
                                <face filter="Field in ('M_birthdate') and type in ('Scalar.String') and value not in ('-')"><p>@value</p></face>
                                <face filter="Field in ('S_birthdate') and type in ('Scalar.String') and value not in ('-')">
                                    <div style="font-size:8px">(@value)</div>
                                </face>
        
                                <face filter="Field in ('M_birthdate') and type in ('Scalar.String') and value in ('-')"><p></p></face>
                                <face filter="Field in ('S_birthdate') and type in ('Scalar.String') and value in ('-')">
                                    <div style="font-size:8px"></div>
                                </face>
        
                                <face filter="Field in ('gender') and value = '0'"><td>Female</td></face>
                                <face filter="Field in ('gender') and value = '1'"><td>Male</td></face>
                                <face filter="Field in ('type') and value = '0'"><td style="direction: ltr;">Infant</td></face>
                                <face filter="Field in ('type') and value = '1'"><td style="direction: ltr;">Child</td></face>
                                <face filter="Field in ('type') and value = '2'"><td style="direction: ltr;">Adult</td></face>
                                <face filter="Field in ('type') and value = '3'"><td style="direction: ltr;">Child</td></face>
                                <face filter="Field in ('type') and value = '4'"><td style="direction: ltr;">Adult|Ext </td></face>
                                <face filter="type in ('Array','object')">@Child</face>                                                
                            </basis>
                            </basis>
        
                            <basis core="group" if="[##db.InvoiceType.Value##] in ('13')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">   
                                <face filter="Field in ('invoiceDetails','invoiceDate','products','account','priceDetails','baggages','bill','creditPay','passengers')"></face>
                                <face filter="Field in ('passengersvisa')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>لیست مسافران</span> / <span>PASSENGERS INFORMATION</span></caption>
                                        <thead>
                                            <tr>
                                              
                                                <th><span>نام</span> <span>NAME</span></th>
                                                <th><span>نام خانوادگی</span><span>SURNAME</span></th>
                                                <th><span>تاریخ تولد</span><span>DATE OF BIRTH</span></th>
                                                <th><span>کدملی</span><span>NATIONAL CODE</span></th>
                                                <th><span>نام پدر</span><span>father name</span></th>
        
                                                <th><span>کد پاسپورت</span><span>PASSPORT NO</span></th>
        
                                                <th><span>اعتبار پاسپورت</span><span>EXPIRATION DATE OF PASSPORT</span></th>
                                                <th><span>تاریخ صدور گذرنامه</span><span>PASSPORT NO</span></th>
                                                <th><span>کشور</span><span>country</span></th>
                                                <th><span>کشور صادرکننده گذرنامه</span><span>PassportIssueCountry</span></th>
                                                <th><span>کشور محل تولد</span><span>Countryofbirth</span></th>
        
                                                <th><span>جنسیت</span><span>GENDER</span></th>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                            </tr>
                                        </thead>
                                        <tbody class="invoice_tbody">@Child</tbody>
                                    </table>
                                </face>       
        
                               <face filter="Field in ('passengerinfo')"><tr>@child</tr></face> 
                    <face filter="Field in ('firstname','lastname','nationalcode','passportcode','passportexpiration')"><td>@value</td></face>        
        
                    <face filter="Field in ('birthdate') and type in ('object')"><td>@child</td></face>
                    <face filter="Field in ('M_birthdate') and type in ('Scalar.String') and value not in ('-')"><p>@value</p></face>
                    <face filter="Field in ('S_birthdate') and type in ('Scalar.String') and value not in ('-')">
                        <div style="font-size:8px">(@value)</div>
                    </face>
        
                    <face filter="Field in ('M_birthdate') and type in ('Scalar.String') and value in ('-')"><p></p></face>
                    <face filter="Field in ('S_birthdate') and type in ('Scalar.String') and value in ('-')">
                        <div style="font-size:8px"></div>
                    </face>
        
                    <face filter="Field in ('countryofresidence','Countryofbirth','countryofpassportissue')"><td>@child</td></face>
                    <face filter="Field in ('ecountryname')">@value</face>
             
                    <face filter="Field in ('fathername')"><td>@value</td></face>
                
                     <face filter="Field in ('passportissuedate')"><td>@value</td></face>
                    <face filter="Field in ('gender') and value = '0'"><td>Female</td></face>
                    <face filter="Field in ('gender') and value = '1'"><td>Male</td></face>
                    <face filter="Field in ('type') and value = '0'"><td style="direction: ltr;" class="typepassenger">Infant</td></face>
                    <face filter="Field in ('type') and value = '1'"><td style="direction: ltr;" class="typepassenger">Child</td></face>
                    <face filter="Field in ('type') and value = '2'"><td style="direction: ltr;" class="typepassenger">Adult</td></face>
                    <face filter="Field in ('type') and value = '3'"><td style="direction: ltr;" class="typepassenger">Child</td></face>
                    <face filter="Field in ('type') and value = '4'"><td style="direction: ltr;" class="typepassenger">Adult (Extra)</td></face>
                
                    <face filter="type in ('Array','object')">@Child</face>                                               
                            </basis>
                            </basis>
    
                        <!-- price Details ######################################################################################## -->
                        <!-- type == 1,2,5,8,9 -->
                        <basis:8 core="group" if="[##db.InvoiceType.Value##] in ('1','2','5','8','9')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')"></face>     
                                <face filter="Field in ('priceDetails')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><p><span>جدول قیمت به تفکیک نفرات</span> / <span>COST TABLE BY PASSENGERS</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                                <th><span>تعداد مسافر</span><span>COUNT</span></th>
                                                <th><span>قیمت واحد</span><span>UNIT COST</span></th>
                                                <th><span>قیمت کل</span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody ">@Child</tbody>
                                    </table>
                                </face>           
                                     
                                <face filter="Field in ('adult')  and type in ('Object')">
                                    <tr>
                                        <td>Adult</td>
                                        @Child
                                    </tr>
                                </face> 
    
                                <face filter="Field in ('child')  and type in ('Object')">
                                    <tr>
                                        <td>Child</td>
                                        @Child
                                    </tr>
                                </face>             
    
                                <face filter="Field in ('infant') and type in ('Object')">
                                    <tr>
                                        <td>Infant</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('perperson','total')"><td>@value</td></face>
                                <face filter="Field in ('count')"><td>@value</td></face>
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>            
                            </basis>
                        </basis:8>
    
                        <!-- type == 3 -->
                        <basis:9 core="group" if="[##db.InvoiceType.Value##] in ('3')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')"></face>        
                                <face filter="Field in ('priceDetails')">
                                    <table class="invoice_tbl hidden">
                                        <caption class="invoice_caption"><p><span>جدول قیمت به تفکیک نفرات -اتاق</span> / <span>COST TABLE BY PASSENGERS - ROMM</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                                <th><span>اتاق</span><span>ROOM</span></th>
                                                <th><span>تعداد مسافر</span><span>COUNT</span></th>
                                                <th><span>قیمت واحد (به ازای هر مسافر)</span><span>UNIT COST(FOR EACH PASSENGER)</span></th>
                                                <th><span>قیمت کل </span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                                        
                                        @Child
                                    </table>
                                </face>           
                                
                                <face filter="Field in ('room')"><tbody class="invoice_tbody Room_priceDetails">@Child</tbody></face>
    
                                <face filter="Field in ('adult')">
                                    <tr>
                                        <td>Adult</td>
                                        @Child
                                    </tr>
                                </face> 
    
                                <face filter="Field in ('child Withbed')">
                                    <tr>
                                        <td>Child (WB)</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('child Withoutbed')">
                                    <tr>
                                        <td>Child (WOB)</td>
                                        @Child
                                    </tr>
                                </face>                
    
                                <face filter="Field in ('infant')">
                                    <tr>
                                        <td>Infant</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('extra Adult')">
                                    <tr>
                                        <td>Extra Adult</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('rooms')">
                                    <tr>
                                        <td>-</td>
                                        @Child
                                    </tr>
                                </face>
                        
                                <face filter="Field in ('roomIndex','perperson','total') and value = ''"><td>-</td></face>
                                <face filter="Field in ('roomIndex','perperson','total') and value <> ''"><td>@value</td></face>
                                <face filter="Field in ('count')"><td>@value</td></face>
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>           
                            </basis>
                        </basis:9>
    
                        <!-- type == 4 -->
                        <basis:10 core="group" if="[##db.InvoiceType.Value##] in ('4','10')">
                            <br>
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')"></face>        
                                <face filter="Field in ('priceDetails')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><p><span>جدول قیمت به تفکیک نفرات - اتاق</span> / <span>COST TABLE BY PASSENGERS - ROMM</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                                <th><span>اتاق</span><span>ROOM</span></th>
                                                <th><span>تعداد مسافر</span><span>COUNT</span></th>
                                                <th><span>قیمت واحد </span><span>UNIT COST</span></th>
                                                <th><span>قیمت کل </span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                                        
                                        @Child
                                    </table>
                                </face>           
                                
                                <face filter="Field in ('room')"><tbody class="invoice_tbody Room_priceDetails">@Child</tbody></face>
    
                                <face filter="Field in ('adult') and type = 'object'">
                                    <tr>
                                        <td>Adult</td>
                                        @Child
                                    </tr>
                                </face> 
    
                                <face filter="Field in ('child Withbed') and type = 'object'">
                                    <tr>
                                        <td>Child (WB)</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('child Withoutbed') and type = 'object'">
                                    <tr>
                                        <td>Child (WOB)</td>
                                        @Child
                                    </tr>
                                </face>                
    
                                <face filter="Field in ('infant') and type = 'object'">
                                    <tr>
                                        <td>Infant</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('extra Adult') and type = 'object'">
                                    <tr>
                                        <td>Extra Adult</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('rooms')">
                                    <tr>
                                        <td>-</td>
                                        @Child
                                    </tr>
                                </face>
                        
                                <face filter="Field in ('roomIndex','perperson','total') and value = ''"><td>-</td></face>
                                <face filter="Field in ('roomIndex','perperson','total') and value <> ''"><td>@value</td></face>
                                <face filter="Field in ('count')"><td>@value</td></face>
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>           
                            </basis>
                        </basis:10>
    
                        <!-- type == 6 -->
                        <basis:11 core="group" if="[##db.InvoiceType.Value##] in ('6')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDetails','invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')"></face>        
    
                                <face filter="Field in ('priceDetails')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>جدول قیمت به تفکیک محصولات</span> / <span>COST TABLE BY PRODUCT</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>پرواز</span><span>FLIGHT</span></th>
                                                <th><span>هتل</span><span>HOTEL</span></th>
                                                <th><span>بیمه</span><span>INSURANCE</span></th>
                                                <th><span>جمع کل</span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody "><tr>@Child</tr></tbody>
                                    </table>
                                </face>           
                                     
                                <face filter="Field in ('flight','hotel','insurance','total')"><td>@value</td></face> 
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>            
                            </basis>
                        </basis:11>
    
                         <basis:12 core="group" if="[##db.InvoiceType.Value##] in ('11')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات  lounge </span> / <span>Lounge INFORMATION</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>نام محصول</span><span>ProductName</span></th>            
                                                <th><span>نام فرودگاه</span><span>AirportName</span></th>
                                                <th><span>شهر</span><span>City</span></th>
                                                <th><span>ایرلاین</span><span>Airline</span></th>
                                                <th><span>کد  مسیر</span><span>RouteCode</span></th>
                                                <th><span>تاریخ</span><span>Date</span></th>
                                                <th><span>ساعت پرواز</span><span>Time</span></th>
                                                <th><span>نوع سفر</span><span>Travel Type</span></th>
                                                <th><span>نوع پرواز</span><span>Flight Type</span></th>
                                                                                                  
                                            </tr>
                                        </thead>
    
                                        <tbody>@child</tbody>
                                    </table>
                                </face>
                                                                        
                                <face filter="Field in ('cip') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('loungename','airportname','route','time','airline','routecode') and type in ('scalar.String')"><td>@value</td></face>
                                <face filter="Field in ('travelType') and value in ('1')"><td>داخلی</td></face> 
                                <face filter="Field in ('travelType') and value in ('2')"><td>خارجی</td></face>  
                                 <face filter="Field in ('flightType') and value in ('1')"><td>ورودی</face> 
                                <face filter="Field in ('flightType') and value in ('2')"><td>خروجی</face> 
                               <face filter="Field in ('city_flight')">-@value</td></face> 
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:8px">(@value)</div></face>
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:12>
    
                        <basis:13 core="group" if="[##db.InvoiceType.Value##] in ('11')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay','transfers','services','wheelchair','escortinfo')"></face>     
                                <face filter="Field in ('priceDetails')">
                                    <table class="invoice_tbl hidden">
                                        <caption class="invoice_caption"><p><span>جدول قیمت به تفکیک نفرات</span> / <span>COST TABLE BY PASSENGERS</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                                <th><span>تعداد مسافر</span><span>COUNT</span></th>
                                                <th><span>قیمت واحد</span><span>UNIT COST</span></th>
                                                <th><span>قیمت کل</span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody ">@Child</tbody>
                                    </table>
                                </face>           
                                     
                                <face filter="Field in ('adult') and type in ('object')">
                                    <tr>
                                        <td>Adult</td>
                                        @Child
                                    </tr>
                                </face> 
    
                                <face filter="Field in ('child') and type in ('object')">
                                    <tr>
                                        <td>Child</td>
                                        @Child
                                    </tr>
                                </face>             
    
                                <face filter="Field in ('infant') and type in ('object')">
                                    <tr>
                                        <td>Infant</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('perperson','total')"><td>@value</td></face>
                                <face filter="Field in ('count')"><td>@value</td></face>
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>            
                            </basis>
    
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay','adult','child','infant','services','wheelchair','escortinfo')"></face>     
                                <face filter="Field in ('transfers') and value not in ('[]')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><p><span>جدول قیمت ترنسفر</span> / <span>COST TABLE BY transfers</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>نام ترنسفر</span><span>TransferName</span></th>
                                                <th><span>آدرس</span><span>Address</span></th>
                                                <th><span>ساعت</span><span>Time</span></th>
                                                <th><span>تلفن</span><span>Phone</span></th>
                                                <th><span>قیمت واحد</span><span>UNIT COST</span></th>
                                                <th><span>قیمت کل</span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                                 <th><span>توضیحات</span><span>Description</span></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody ">@Child</tbody>
                                    </table>
                                </face>           
                                     
                         
    
                                <face filter="Field in ('car_name','address','time','phone','perperson','total','des_transfer')"><td>@value</td></face>
                               
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>            
                            </basis>
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay','adult','child','infant','transfers','wheelchair','escortinfo')"></face>     
                                <face filter="Field in ('services') and type in ('Array') and value not in ('[]')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><p><span>جدول قیمت  خدمات</span> / <span>COST TABLE BY services</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>نام  خدمات</span><span>ServiceName</span></th>
                                                <th><span>تعداد</span><span>Count</span></th>
                                                <th><span>قیمت واحد</span><span>UNIT COST</span></th>
                                                <th><span>قیمت کل</span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                                 <th><span>توضیحات</span><span>Description</span></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody ">@Child</tbody>
                                    </table>
                                </face>           
                                     
                         
    
                                <face filter="Field in ('service') and type in ('Object')"><tr>@child</tr></face>
                                <face filter="Field in ('perperson','total')"><td class="Seprator">@value</td></face>
                                <face filter="Field in ('count','unit','name','des_service')"><td>@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>                       
                            </basis>
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay','adult','child','infant','transfers','services','escortinfo')"></face>     
                                    <face filter="Field in ('wheelchair') and type in ('Object')">
                                        <table class="invoice_tbl">
                                            <caption class="invoice_caption"><p>جدول قیمت صندلی چرخدار</p></caption>
                                            <thead>
                                                <tr>
                                                   
                                                    <td>تعداد صندلی چرخدار</td>
                                                    <td>قیمت واحد</td>
                                                    <td>قیمت کل</td>
                                                    <td>واحد</td>
                                                </tr>
                                            </thead>
                                            
                                            <tbody class="invoice_tbody "><tr>@Child</tr></tbody>
                                        </table>
                                    </face> 
                                    <face filter="Field in ('perperson','total')"><td class="Seprator">@value</td></face>
                                    <face filter="Field in ('count','unit')"><td>@value</td></face>
                                    <face filter="type in ('Array','object')">@Child</face>                       
                            </basis>
    
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay','adult','child','infant','transfers','services','wheelchair')"></face>     
                                     <face filter="Field in ('escortinfo') and type in ('Array') and value not in ('[]')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption"><p>جدول قیمت   مشایعت کننده</p></caption>
                            <thead>
                                <tr>
                                    <td>نام</td>
                                    <td>نام خانوادگی</td>
                                    <td>جنسیت</td>
                                    <td>قیمت واحد</td>
                                    <td>قیمت کل</td>
                                    <td>واحد</td>
                                </tr>
                            </thead>
                            
                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>
                    <face filter="Field in ('escort') and type in ('Object')"><tr>@child</tr></face>
                    <face filter="Field in ('perperson','total')"><td class="Seprator">@value</td></face>
                    <face filter="Field in ('unit','firsname','lastname')"><td>@value</td></face>
                    <face filter="Field in ('gender') and value in ('0')"><td>خانم</td></face>
                     <face filter="Field in ('gender') and value in ('1')"><td>آقا</td></face>
                    <face filter="type in ('Array','object')">@Child</face>                           
                            </basis>
    
                        </basis:13>
    
    
                        <!-- bill ################################################################################################# -->
                        <basis:14 core="group" if="[##db.InvoiceType.Value##] in ('10','4')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face
                                    filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','creditPay')">
                                </face>
                                <face filter="Field in ('bill')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>جدول قیمت کلیss</span> / <span>TOTAL COST TABLE</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>قیمت کل </span><span>TOTAL COST</span></th>
                                                <th><span>کسر کمیسیون</span><span>COMMISSION</span></th>
                                                <th><span>مبلغ تخفیف</span><span>DISCOUNT</span></th>
                                                <th><span>کد تخفیف</span><span>DISCOUNT CODE</span></th>
                                                <th><span>مبلغ قابل پرداخت با کسر کمیسیون</span><span>COST BY COMMISSION</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                            
                                        <tbody class="invoice_tbody">
                                            <tr>@Child</tr>
                                        </tbody>
                                    </table>
                                </face>
                            
                                <face filter="Field in ('totalprice','commission','couponcost','totalwithcommisions')">
                                    <td style="direction:rtl">@value</td>
                                </face>
                                <face filter="Field in ('unit','couponcode')">
                                    <td style="font-family:IRANSansWeb;">@value</td>
                                </face>
                                <face filter="Field in ('pdf_description') and value in ('[]')">
                                    <div class="pdf_description">
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 1 : </span> <br>
                                            <span style="color:#CE0E0E">موضوع قرارداد : </span>
                                            موضوع این قرارداد تعیین حدود وظایف و مسئولیت های طرفین قرارداد و همچنین هزینه خدمات گردشـگري جهت ارائه
                                            بشرح مندرج در قرارداد می باشد .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 2 : </span> <br>
                                            <span style="color:#CE0E0E">شرایط قرارداد : </span>
                                            چنانچه گشت از سوي کارگزار به دلیل حد نصاب نرسیدن قابل اجرا نباشد ، کارگزار موظف است قبل از تاریخ اجراي
                                            گشت مراتب را به نحو مقتضی با ارائه دلایل به اطلاع گردشگر رسانده، نسبت به استرداد کل وجوه دریافتی از
                                            گردشگر اقدام نماید .
                                        </p>
                            
                                        <p style="margin:10px 0;color:#CE0E0E">
                                            <span style="color:#CE0E0E">توجه </span>
                                            در صورت تایید نشدن هتل دیگری جایگزین میشود که در صورت اختلاف نرخ بر حسب پکیج ، نرخ ما به التفاوت دریافت
                                            میگردد.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 3 : </span> <br>
                                            ساعت تخلیه اتاق های هتل بر اساس قوانین و مقررات حاکم در مقصد مورد نظر بوده، گردشگر موظف به رعایت آن می
                                            باشد. در صورت تحویل اتاق زودتر از موعد مقرر توسط گردشگر، هیچ مبلغی به گردشگر مسترد نخواهد شد.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 4 : </span> <br>
                                            گردشگران انفرادي (تک نفره) به هنگام ثبت نام مشمول مقررات و نرخ استفاده از اتاق یک تخته می باشند.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 5 : </span> <br>
                                            در خصوص تورهای برنـامه ریزي شـده بـا پروازهای غیر چارتر ، شـرایط ابطال مطابق با مقررات شـرکت هواپیمایی
                                            مربوطه و هتل محل اقامت اعمال خواهد شد .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 6 : </span> <br>
                                            چنانچه در برخی مقاصد در بدو ورود گردشگر به فرودگاه کشور مقصد ، گذرنامه وي توسط مقامات ذیربط اخذ و
                                            نگهداری تا به هنگام مراجعت در فرودگاه به گردشگر عودت داده شود، در چنین شرایطی هیچگونه مسئولیتی متوجه
                                            کارگزار نخواهد بود.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 7 : </span> <br>
                                            در صورتیکه مطابق شرایط اعلامی از سوي سفارتخانه در خصوص بازگشت گردشگر، تضمینی از کارگزار اخذ شود، گردشگر
                                            موظف است به همان میزان، ضمانت نامه بانکی به کارگزار تسلیم نماید.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">تبصره 1 :</span> <br>
                                            گردشـگران پس از بازگشت از سفر ، جهت دریافت ضمانت نامه بانکی سپرده شده لازم است با در دست داشتن اصل
                                            گذرنامه و تصویر صفحه مربوط به مهر ورود و خروج کشور مقصد به کارگزار مراجعه نماید و کارگزار موظف است پس از
                                            تائید اصالت و صحت مدارك ارائه شده ، فورا نسبت به فک ضمانت نامه اقدام نماید.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 8 : </span> <br>
                                            در صورتیکه در روادیـد صادره مـدت زمان مشخصی جهت اقامت پیش بینی شـده باشد ، چنانچه هریک از گردشـگران از
                                            بازگشت به کشور در تاریخ از پیش تعییـن شـده خـودداري نماینـد و ایـن امر بـا تـوجه به تعهد گردشگر موجبـات
                                            خسارت به کارگزار را فراهم آورد، کـارگزار مجـاز است بـا ارائه مـدارك مسـتدل،معادل هزینه (خسارت) وارده را
                                            از طریق ضبط ضمانت نامه به نفع خود دریافت نماید .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 9 : </span> <br>
                                            در صورت عدم صدور ویزا از طرف کشور مقصد ، کارگزار در این خصوص مسئولیتی نداشته ، لیکن در صورتی که کارگزار
                                            در این خصوص هزینه اي متقبل شده باشد ، جهت اخذ هزینه های انجام شده موظف است اسناد و مدارك معتبر را به
                                            گردشگر ارائه نماید .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 10 : </span> <br>
                                            در صورتیکه گردشگر براي سایر گردشگران یا سرپرست گروه ، راهنمایان محلی و درکل کسانی که در اجراي گشت نقش
                                            داشتند مزاحمتی ایجاد نماید و یا مرتکب اعمال خلاف شئون و اخلاق عرفی در کشور مربوطه گردد ، سرپرست گروه
                                            موظف است بنا به صورتجلسه و گواھی دیگر اعضاي گروه حسب مورد تصمیم لازم را در خصوص آن گردشگر اتخاذ نموده و
                                            مراتب را جهت اقدام به کارگزار مجري گزارش نماید .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 11 : </span> <br>
                                            رسیدگی به ھرگونه اختلاف فی ما بین طرفین قرارداد با ارائه دلایل بر عهده سازمـان میراث فرهنگی، صـنایع دستی
                                            و گردشگري بوده و آراء صادره از سازمان براي طرفین لازم الاجراست.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 12 : </span> <br>
                                            در خصوص ثبت نام گروهی در شرایط عادي(غیر فورس) فقط فردي که به نمایندگی از سوي گردشگران اقدام به ثبت نام و
                                            عقد قرارداد نموده مجاز به مراجعه به کارگزار جهت پیگیري ، ابطال و یا دریافت وجوه پرداختی بوده و سایر
                                            گردشگران در این خصوص مجاز به مراجعه به کارگزار نمی باشند .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 13 : </span> <br>
                                            رعایت شئونات و اخلاقیات در طول سفر از سوي گردشگر الزامی بوده و ھمچنین گردشگر موظف به رعایت کلیه مقررات
                                            کشور مقصد می باشد. لذا عواقب ارتکاب هرگونه تخلف وتبعات داشتن داروهایی که احیانا در کشور مقصد غیر مجاز
                                            بوده، بر عهده گردشگر است و چنانچه از این بابت کارگزار جریمه اي پرداخت نماید می تواند با ارائه مستندات ،
                                            هزینه انجام شده را از گردشگردریافت نماید .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 14 : </span> <br>
                                            اگر مسافرت به صورت گروهی و خانوادگی باشد ، در صورتیکه درخواست روادید هر یک از گردشگران، مردود یا با
                                            تأخیر دریافت شود بقیه گردشگران ملزم به استفاده از خدمات درخواستی و در صورت عدم استفاده می بایست کلیه
                                            هزینه های مربوط به ابطال را پرداخت نماید.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">تبصره 2 : </span> <br>
                                            در خصوص بستگان درجه یک ( پدر، مادر،همسر، فرزندان مجرد) هزینه روادید و یک شب اقامت در هتل و جریمه ابطال
                                            بلیط دریافت میگردد.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 15 : </span> <br>
                                            حفظ اموال و مدارك شخصی به عهده گردشگر بوده و در صورت مفقود شدن آن مسئولیتی متوجه مدیر گشت یا کارگزار
                                            نخواھد بود.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 16 : </span> <br>
                                            چنانچه صدور روادید و تحویل گذرنامه توسط برخی سفارتخانه ها در ساعات آخر قبل از شروع سفر صورت بگیرد،
                                            گردشگر بایستی مقدمات سفر خود را قبلا آماده نموده باشد .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">تبصره 3 : </span> <br>
                                            اصل بر عادي بودن روادید است، لیکن چنانچه گردشـگر اصـرار بر اخذ روادید به شکل فوري را داشته باشد، مسئولیت
                                            های ناشی از آن، بر عهده گردشگر خواهد بود
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 17 : </span> <br>
                                            درصورت درخواست سفارتخانه مربوطه جهت انجام مصاحبه با گردشگر و یا انگشت نگاري به منظور صدور روادید ،
                                            گردشگر بایستی با هماهنگی کارگزار در موعد مقرر در کنسولگري سفارتخانه ذیربط حضور یافته و در مصاحبه شرکت
                                            نماید و چنانچه به دلیل عدم انجام امور مذکور روادید از سوي سفارتخانه صادر نگردد، جرائم اخذ خواهد شد.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 18 : </span> <br>
                                            گردشگر موظف است در ساعات اعلام شده، در برنامه های گشت و ترانسفر فرودگاهی شرکت نموده و در صورت عدم حضور
                                            به موقع هنگام حرکت گشت ، شخصاً بایستی هزینه های مربوطه را جهت پیوستن به گروه و ادامه برنامه گشت پرداخت
                                            نماید ، در غیر اینصورت کارگزار مربوطه هیچگونه مسـئولیتی در این خصوص نخواهد داشت .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 19 : </span> <br>
                                            در صورت ابطال گشت توسط گردشگر، کارگزار مجاز به ابطال روادید صادره براي گردشگر توسط مقامات سفارت
                                            صادرکننده روادید خواهد بود.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 20 : </span> <br>
                                            در قبال هرگونه افزایش غیرارادي در قیمت گشت اعم از افزایش نرخ بلیط و یـا سـایر خـدمات ، بـا ارائه مدارك
                                            مسـتند از سوي کارگزار با تأیید سازمان، گردشگر موظف به پرداخت مابه التفاوت اعلام شده از سوي کارگزار می
                                            باشد .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">تبصره 4 : </span> <br>
                                            پرداخت کلیه عوارض خروج از کشور بر عهده گردشگر می باشد.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 21 : </span> <br>
                                            چنانچه گردشگر ممنوع الخروج باشد و یا در بدو ورود به کشوري مقامات محلی از ورود آن به کشور جلوگیري نمایند،
                                            گردشگر ملـزم به پرداخت هزینه های صورت گرفته از سـوي کارگزار با ارائه مستـندات و مدارك مربوطه خواهد بود.
                                            سرپرست گشت نیز موظف به همکاری جهت بازگشت گردشگر به کشور می باشد و هیچ نوع مسئولیتی در این خصوص متوجه
                                            کارگزار نخواهد بود.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 22 : </span> <br>
                                            در صورتیکه گردشگر در خارج از کشور مستقلاً و خارج از برنامه گشت ارائه شده نسبت به خریداری خدمات اختیاری
                                            اقدام نموده و در آن شرکت نماید هزینه و مسئولیت عواقب آن در خصوص بروز حوادث بر عهده گردشگر خواهد بود.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 23 : </span> <br>
                                            کارگزار موظف است مطابق با دستورالعمل بیمه ابلاغی از سوي سازمان، اقدامات لازم را در خصوص پوشـش بیمه اي
                                            تکلیفی و اختیاري به عمل آورده و در صورت بروز هرنوع حادثه اي در طول سفر علاوه بر اقدام بر اساس شرایط بیمه
                                            تحت پوشش ، نسبت به همکاری و مساعدت های لازم در این خصوص اقدام نماید .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 24:</span> <br>
                                            کنترل مدارك گردشگر، از جمله تاریخ اعتبار گذرنامه گردشگر و شرایط سنی همراهان بر عهده کارگزار می باشد. لذا
                                            در صورت قصور در این زمینه توسط کارگزار، کلیه هزینه ها و خسارات بر عهده کارگزار خواهد بود.
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 25:</span> <br>
                                            کارگزار متعهد است که برنامه سفر و گشت مورد توافق را به طور کامل و دقیق انجام دهد ، لیکن در صورت وقوع
                                            حوادث و پیشامدهای غیر منتظره از قبیل جنگ، شورش ، اعتصاب و مشکلاتی که از کنترل کارگزار خارج بوده و سـبب
                                            ابطال یا تغییر برنامه گشت شود مسئولیتی متوجه کارگزار نخواهد بود، لیکن کارگزار موظف است وجوه دریافتی را
                                            به گردشگر مسترد نماید .
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 25:</span> <br>
                                            در صورتیکه برنامه گشت ارائه شده توسط کارگزار، در طول سفر عیناً به اجرا گذاشته نشود و یا درسطحی بالاتر از
                                            آنچه
                                            در قرارداد توافق شده، ارائه نگردد گردشگر مجاز است موارد را با ارائه دلایل مستدل به کارگزار اعلام نموده،
                                            کارگزار موظف به
                                            جلب رضایت گردشگر می باشد و در صورت بروز اختلاف، رأي سازمان به عنوان حکم مورد پذیرش طرفین قرار خواهد
                                            گرفت.
                                            این قرارداد در 2 نسخه مشتمل بر 25 ماده و 4 تبصره تنظیم که هر کدام حکم واحد را داشته و بر اساس مواد 230
                                            قانون مدنی بوده که براي طرفین و یا قائم مقام قانونی آنها لازم الاتباع می باشد
                                        </p>
                            
                                        <p style="margin:10px 0">
                                            <span style="font-weight:bold;">ماده 26 : </span> <br>
                                            در صورت انصراف کتبی مسافر از همراهی تور ، تا یکماه قبل از پرواز معادل 20% قیمت کل تور و از یکماه تا سه
                                            هفته قبل از پرواز معادل 30% قیمت کل تور و از سه هفته تا 72 ساعت قبل از پرواز معادل 50% قیمت کل تور و در
                                            کمتر از 72 ساعت قبل از پرواز معادل 70% قیمت کل تور به عنوان جریمه از کل مبلغ گشت کسر و مابقی وجوه به
                                            مسافر پرداخت خواهد شد.
                                        </p>
                                    </div>
                                </face>
                                <face filter="Field in ('pdf_description') and value not in ('[]')">
                                    <div class="pdf_description">
                                        @child
                                    </div>
                                </face>
                                <face filter="Field in ('note')">
                                    <p style="margin:10px 0">
                                        @child
                            
                                    </p>
                                </face>
                                <face filter="Field in ('title')">
                            
                                    <span style="font-weight:bold;">@value : </span> <br>
                            
                            
                                </face>
                                <face filter="Field in ('text')">
                                    @value
                                </face>
                                <face filter="type in ('Array','object')">@Child</face>
                            </basis>
                        </basis:14>
                        <basis:15 core="group" if="[##db.InvoiceType.Value##] in ('3')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face
                                    filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','creditPay')">
                                </face>
                                <face filter="Field in ('bill')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>جدول قیمت کلی</span> / <span>TOTAL COST TABLE</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>قیمت کل </span><span>TOTAL COST</span></th>
                                                <th><span>کسر کمیسیون</span><span>COMMISSION</span></th>
                                                <th><span>مبلغ تخفیف</span><span>DISCOUNT</span></th>
                                                <th><span>کد تخفیف</span><span>DISCOUNT CODE</span></th>
                                                <th><span>مبلغ قابل پرداخت با کسر کمیسیون</span><span>COST BY COMMISSION</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                            
                                        <tbody class="invoice_tbody">
                                            <tr>@Child</tr>
                                        </tbody>
                                    </table>
                                </face>
                            
                                <face filter="Field in ('totalprice','commission','couponcost','totalwithcommisions')">
                                    <td style="direction:rtl">@value</td>
                                </face>
                                <face filter="Field in ('unit','couponcode')">
                                    <td style="font-family:IRANSansWeb;">@value</td>
                                </face>
                                <face filter="Field in ('pdf_description') and value in ('[]')">
                                    <div class="pdf_description">
                                        <p style="margin:10px 0;color:#CE0E0E">
                                            <span style="color:#CE0E0E">توجه </span>
                                            در صورت تایید نشدن هتل دیگری جایگزین میشود که در صورت اختلاف نرخ بر حسب پکیج ، نرخ ما به التفاوت دریافت
                                            میگردد.
                                        </p>
                                    </div>
                                </face>
                                <face filter="Field in ('pdf_description') and value not in ('[]')">
                                    <div class="pdf_description">
                                        @child
                                    </div>
                                </face>
                                <face filter="Field in ('note')">
                                    <p style="margin:10px 0">
                                        @child
                            
                                    </p>
                                </face>
                                <face filter="Field in ('title')">
                            
                                    <span style="font-weight:bold;">@value : </span> <br>
                            
                            
                                </face>
                                <face filter="Field in ('text')">
                                    @value
                                </face>
                                <face filter="type in ('Array','object')">@Child</face>
                            </basis> 
                        </basis:15>
                        <basis:16 core="group" if="[##db.InvoiceType.Value##] not in ('4','10','3')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face
                                    filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','creditPay')">
                                </face>
                                <face filter="Field in ('bill')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>جدول قیمت کلی</span> / <span>TOTAL COST TABLE</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>قیمت کل </span><span>TOTAL COST</span></th>
                                                <th><span>کسر کمیسیون</span><span>COMMISSION</span></th>
                                                <th><span>مبلغ تخفیف</span><span>DISCOUNT</span></th>
                                                <th><span>کد تخفیف</span><span>DISCOUNT CODE</span></th>
                                                <th><span>مبلغ قابل پرداخت با کسر کمیسیون</span><span>COST BY COMMISSION</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                            
                                        <tbody class="invoice_tbody">
                                            <tr>@Child</tr>
                                        </tbody>
                                    </table>
                                </face>
                            
                                <face filter="Field in ('totalprice','commission','couponcost','totalwithcommisions')">
                                    <td style="direction:rtl">@value</td>
                                </face>
                                <face filter="Field in ('unit','couponcode')">
                                    <td style="font-family:IRANSansWeb;">@value</td>
                                </face>
                                <face filter="Field in ('pdf_description') and value not in ('[]')">
                                    <div class="pdf_description">
                                        @child
                                    </div>
                                </face>
                                <face filter="Field in ('note')">
                                    <p style="margin:10px 0">
                                        @child
                            
                                    </p>
                                </face>
                                <face filter="Field in ('title')">
                            
                                    <span style="font-weight:bold;">@value : </span> <br>
                            
                            
                                </face>
                                <face filter="Field in ('text')">
                                    @value
                                </face>
                                <face filter="type in ('Array','object')">@Child</face>
                            </basis> 
                        </basis:16>
    
                      
                    </div>
    
                    <style type="text/css">
                        @font-face{
                            font-family:'IRANSansWeb';
                            src:url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.eot');src:local('?'),
                            url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.woff2') format("woff"),
                            url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.ttf') format("truetype"),
                            url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.otf') format("otf");
                            font-weight:400;font-style:normal
                        }
                        @font-face{
                            font-family:'FontAwesome';
                            src:local('FontAwesome'),
                            url('[##cms.cms.domainname##]/_fonts/fontawesome-webfont.eot?#iefix');src:local('?'),
                            url('[##cms.cms.domainname##]/_fonts/fontawesome-webfont.woff') format("woff"),
                            url('[##cms.cms.domainname##]/_fonts/fontawesome-webfont.ttf') format("truetype"),
                            url('[##cms.cms.domainname##]/_fonts/fontawesome-webfont.otf') format("otf");
                            font-weight:400;font-style:normal
                        }
                        *{margin: 0;padding:0;}
                         body{font-family:IRANSansWeb;font-size:10px;color:#3b3838;font-weight:bold}
                         span,i{display:inline-block;}
                         p{text-align:justify;}
                         strong{color:#CE0E0E}
                        .clr{clear: both;}
                        .Panel_pdf{margin:0 auto;direction:rtl}
                        .pdf_title{text-align: center;font-weight: bold;}
                        .pdf_description {margin:10px 0;text-align:justify;}
                        .pdf_direct{direction:ltr;}
                        .Panel_pdf table{width:100%;margin:10px 0;}
                        .Panel_pdf table caption{text-align:right;border-right: 1px solid #fff;border-left: 1px solid #fff;font-size:10px;}
                        .Panel_pdf table caption span{padding:5px}
                        .Panel_pdf table tr th{text-align:center;font-weight:normal;background:#DDE8F0;padding:3px 2px;font-size:9px}
                        .Panel_pdf table tr td{text-align:center;padding:3px 2px;direction: ltr;border: 1px solid #CBDDEA;background:#F4F8FB;font-size:9px;}
                        .Panel_pdf table tr td p{text-align:center;}
                        .Panel_pdf table.tourDetails tr td{text-align:right;padding:3px 5px;font-family:IRANSansWeb;}
                        .Panel_pdf table.tourDetails tr td:nth-child(1){background:#DDE8F0;font-family:IRANSansWeb;padding:3px 5px}
                        .passengers::after {content: "+";display: inline-block;margin: 0 3px;}
                        .passengers:last-child:after{display:none;}
                         th span{display: block;}
                        .invoice_caption{font-size: 10px;}
                        .hidden {display: none;}
                    </style>
                </body>
            </html>
        </basis>
    </basis>
     </basis>
     <basis core="group" name="check-version" if="'[##cms.cms.server_main_version##]' <> '4'">
        <basis core="export" type="pdf" >
            <configs>    
            <add name="savefile" value="false"/>
            <add name="colormode" value="color"/>
            <add name="orientation" value="Portrait"/>
            <add name="papersize" value="A5"/>
            <add name="convertallimgtobase64" value="true"/>
            <add name="filename" value="Ticket"/>
            </configs> 
        </basis>
        <basis core="call" lid="1" file="Client_CheckRkey.inc"></basis> <!-- updated login -->

    
    <basis core="group" if="[##db.checkrkey.userid##]=0  ">
        <!DOCTYPE html>
        <html>
            <head>
                <meta charset="UTF-8"/>
                <title>Invoice</title>
            </head>
            
            <body>
                <p style="text-align:center">شما مجاز به دسترسی نمی باشید</p>
                <p style="text-align:center">You are not allowed to access this page</p>
                <style type="text/css">
                    @font-face{
                        font-family:'IRANSansWeb';
                        src:url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.eot');src:local('?'),
                        url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.woff2') format("woff"),
                        url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.ttf') format("truetype"),
                        url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.otf') format("otf");
                        font-weight:400;font-style:normal
                    }
                    body{font-family:IRANSansWeb;font-size:20px;color:#3b3838;}
                </style>
            </body>
        </html>
    </basis>
    
    <basis core="group" if="[##db.checkrkey.userid##]<>0">
        <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource" > 
            <member method="cms"
            name="InvoiceView" 
            query='
            { 
                "name": "db", 
                "mid": "20", 
                "member":
                [
                    { 
                        "name": "q", 
                        "type":"list", 
                        "request":"invoiceview", 
                        "id":"[##cms.query.id##]"
    
    
                    }
                ] 
            }'/> 
        </basis>
    
        <basis core="group" name="Delay_2">
            <basis core='inlinesource' name='db'>
                <member name="InvoiceView_Tree" format="json"preview="">{"root":[##db.InvoiceView.result##]}</member>
                <member 
                    name='InvoiceOwnerid'  
                    format="json" 
                    postsql="select value from [db.InvoiceOwnerid] where Field = 'ownerid'"
                    preview=""> 
                    {"root":[##db.InvoiceView.result##]}
                </member>
    
                <member 
                    name='InvoiceOpen'  
                    format="json" 
                    postsql="select value from [db.InvoiceOpen] where Field = 'open'"
                    preview=""> 
                    {"root":[##db.InvoiceView.result##]}
                </member>       
    
                <member 
                    name='InvoiceType'  
                    format="json" 
                    postsql="select value from [db.InvoiceType] where Field = 'invoicetype'"
                    preview=""> 
                    {"root":[##db.InvoiceView.result##]}
                </member>           
            </basis>
    
            <basis core="dbsource" source="basiscore" mid="5" name="db" lid="1" usedforid="[##db.InvoiceOwnerid.Value##]" > 
            <member type="view" name="AgancyName" postsql="select Answer from [db.AgancyName] where typeid=150"/></basis>
    
            <html>
                <head>
                    <title>Invoice</title>
                    <meta charset="utf-8"> 
                </head>
    
                <body>
                    <div class="Panel_pdf">
                        <div class="pdf_title">
                            <basis:00 core="group" if="[##db.InvoiceOpen.Value|(0)##]=0">
                            <basis:02 core="group" if="[##cms.query.status|(0)##]=0">
                            
                            <div>قرارداد</basis:02>
                            <basis:03 core="group" if="[##cms.query.status|(0)##]=1">
                            
                            <div>پیش قرارداد</basis:03>
                            </basis:00>
                            <basis:01 core="group" if="[##db.InvoiceOpen.Value|(0)##]=1"><div>پیش قرارداد</basis:01>
                            ارائه خدمات مسافرتی و گردشگري </div>
                        </div>
                        <div class="pdf_description">
                            <div><span>شماره : </span>[##cms.query.id##]</div>                  
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null"> 
                                <face filter="Field in ('invoiceDate','account','products','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('invoiceDetails')">@child</face>
                                <face filter="Field in ('counterName')"><div>نام کانتر : <span> @value</span> </div></face>    
                                <face filter="type in ('Array','object')">@Child</face>                                
                            </basis>
    
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('travelDate','invoiceDetails','products','creditPay')"></face>
                                <face filter="Field in ('invoiceDate')">
                                    <div class="invoice_Details">تاریخ ثبت قرارداد : @child</div>
                                </face>
                                <face filter="Field in ('mstring')"><span>@value</span></face>
                                <face filter="Field in ('sstring')"><span style="margin:0;">(@value)</span></face>
                                <face filter="type in ('Array','object')">@Child</face>    
                            </basis>
                                
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('baggage')"></face>
                                <face filter="Field in ('title')"><div style="direction:rtl;"><span>نوع خدمات : </span> @value</div></face>    
                                <face filter="type in ('Array','object')">@Child</face>                                
                            </basis>
                        </div>
    
                        <div class="pdf_description">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null"> 
                                <face filter="Field in ('invoiceDetails','invoiceDate','products','passengers','passengersvisa','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('account','person')">@child</face>
    
                                <face filter="Field in ('firstname')">این قرارداد فی مابین خانم/ آقاي @value </face>
                                <face filter="Field in ('lastname')">@value </face>
                                <face filter="Field in ('address')"> به نشانی ( @value ) </face>
                                <face filter="Field in ('tel')"> داراي شماره تلفن ثابت <span class="pdf_direct"> ( @value ) </span></face>
                                <face filter="Field in ('mobile')"> و همراه <span class="pdf_direct">( @value ) </span></face>
    
                                <face filter="Field in ('agencyname')">این قرار داد فی مابین @value</face>
                                <face filter="Field in ('agencymanegername')"> با مدیریت @value</face>
                                <face filter="Field in ('agencytell')"> به شماره تماس <span class="pdf_direct"> ( @value ) </span></face>
    
                                <face filter="type in ('Array','object')">@Child</face>                                                
                            </basis>
    
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null"> 
                                <face filter="Field in ('invoiceDate','account','products','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('invoiceDetails')">@child</face>
                                <face filter="Field in ('persons')"> 
                                    منفرداً یا به نمایندگی تام الاختیار از سوي افراد ذیل جمعاً به تعداد @value نفر که از این پس "گردشگر" نامیده میشود از یک طرف و دفتر <strong>[##db.AgancyName.Answer##]</strong> که از این پس "کارگزار" نامیده میشود , به صورت <strong> خرید اینترنتی </strong>  منعقد گردیده است.
                                </face>
    
                                <face filter="type in ('Array','object')">@Child</face>                                                
                            </basis>
                        </div>
       
    
                        <!-- products ############################################################################################# -->     
                        <!-- type == 1 -->
                        <basis:1 core="group" if="[##db.InvoiceType.Value##] in ('1')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات پرواز </span> / <span>FLIGHT INFORMATION</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>مبدا - مقصد</span><span>FROM - TO</span></th>
                                                <th><span>تاریخ</span><span>DATE</span></th>
                                                <th><span>زمان خروج</span><span>EXit TIME</span></th>
                                                <th><span>زمان ورود</span><span>ARRIVAL TIME</span></th>
                                                <th><span>نام ایرلاین</span><span>AIRLINE</span></th>
                                                <th><span>فرودگاه مبدا</span><span>DEPARTURE AIRPORT</span></th>
                                                <th><span>فرودگاه مقصد</span><span>DESTINATION AIRPORT</span></th>
                                                <th><span>شماره پرواز</span><span>FLIGHT NO</span></th>
                                                <th><span>کلاس پروازی</span><span>FLIGHT CLASS</span></th>                                                    
                                            </tr>
                                        </thead>
    
                                        <tbody>@child</tbody>
                                    </table>
                                </face>
                                                                        
                                <face filter="Field in ('route') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('route') and type in ('scalar.String')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="Field in ('etime','atime','class','routecode') and type in ('scalar.String')"><td>@value</td></face>
                                
                                <face filter="Field in ('airline')"><td>@value</td></face>                                      
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:16px">(@value)</div></face>
    
                                <face filter="Field in ('startairport','endairport')"><td style="font-family:IRANSansWeb;">@Child</td></face>
                                <face filter="Field in ('airport')"><div>@value</div></face>
                                <face filter="Field in ('startotherinfo')"><div>@Child</div></face>
                                <face filter="Field in ('shortname')">@value | </face>           
                                <face filter="Field in ('city')">@value</face>      
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:1>
    
                        <!-- type == 2 -->
                        <basis:2 core="group" if="[##db.InvoiceType.Value##] in ('2','4','6')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات پرواز</span> / <span>FLIGHT INFORMATION</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>مبدا - مقصد</span><span>FROM - TO</span></th>
                                                <th><span>تاریخ</span><span>DATE</span></th>
                                                <th><span>زمان خروج</span><span>EXit TIME</span></th>
                                                <th><span>زمان ورود</span><span>ARRIVAL TIME</span></th>
                                                <th><span>نام ایرلاین</span><span>AIRLINE</span></th>
                                                <th><span>فرودگاه مبدا</span><span>DEPARTURE AIRPORT</span></th>
                                                <th><span>فرودگاه مقصد</span><span>DESTINATION AIRPORT</span></th>
                                                <th><span>شماره پرواز</span><span>FLIGHT NO</span></th>
                                                <th><span>کلاس پروازی</span><span>FLIGHT CLASS</span></th>                                                      
                                            </tr>
                                        </thead>
    
                                        @child
                                    </table>
                                </face>
    
                                <face filter="Field in ('hotel','transfer','insurance','transfers','services')"></face>
                                <face filter="Field in ('departure') and type in ('array')">
                                    <tbody>
                                        <tr>
                                            <td colspan="10" style="background:#FFF4E3;text-align:right;padding-right:22px;font-family:IRANSansWeb">
                                                Departure Information /  مسیر رفت 
                                            </td>
                                        </tr>
                                        @child  
                                    </tbody>                 
                                </face> 
    
                                <face filter="Field in ('return') and type in ('array')">
                                    <tbody>
                                        <tr>
                                            <td colspan="10" style="background:#FFF4E3;text-align:right;padding-right:22px;font-family:IRANSansWeb">
                                                Return Information /  مسیر برگشت 
                                            </td>
                                        </tr>
                                        @child
                                    </tbody>
                                </face>  
    
                                <face filter="Field in ('route') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('route') and type in ('scalar.String')"><td style="font-family:IRANSansWeb">@value</td></face>
                                <face filter="Field in ('etime','atime','class','routecode') and type in ('scalar.String')"><td>@value</td></face>
                                <face filter="Field in ('airline')"><td>@value</td></face>
                                            
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:16px">(@value)</div></face>
    
                                <face filter="Field in ('startairport','endairport')"><td style="font-family:IRANSansWeb">@Child</td></face>
                                <face filter="Field in ('airport')"><div>@value</div></face>
                                <face filter="Field in ('startotherinfo')"><div>@Child</div></face>
                                <face filter="Field in ('shortname')">@value | </face>           
                                <face filter="Field in ('city')">@value</face>      
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:2>
    
                        
    
                        <!-- type == 3 -->
                        <basis:3 core="group" if="[##db.InvoiceType.Value##] in ('3','4','6','10')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>لیست اتاق ها</span> / <span>LIST OF ROOMS</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>نام هتل</span><span>HOTEL NAME</span></th>
                                                <th><span>درجه هتل</span><span>HOTEL GRADE</span></th>
                                                <th><span>شهر</span><span>CITY</span></th>
                                                <th><span>اتاق</span><span>ROOM</span></th>
                                                <th><span>نوع اتاق</span><span>ROOM TYPE</span></th>
                                                <th><span>تاریخ ورود</span><span>CHECK IN</span></th>
                                                <th><span>تاریخ خروج</span><span>CHECK OUT</span></th>
                                                <th><span>مسافران</span><span>PASSENGERS</span></th>
                                                <th><span>خدمات</span><span>SERVICES</span></th>                                                    
                                            </tr>
                                        </thead>
    
                                        @child
                                    </table>
                                </face>
                                
                                <face filter="Field in ('departure','return','transfer','insurance','transfers','services')"></face>
                                <face filter="Field in ('hotel') and type in ('array')">
                                    <tbody>
                                        <tr><td colspan="9" style="background:#FFF4E3;text-align:right;padding:15px 0"></td></tr>
                                        @child 
                                    </tbody>                  
                                </face>
                                
                                <face filter="Field in ('room')"><tr>@Child</tr></face>
                                <face filter="Field in ('hotelName','cityName','roomNumber','roomType','service')"><td>@value</td></face>                
                                <face filter="Field in ('hotelStar')"><td>@value</td></face>
    
                                <face filter="Field in ('fromDate','toDate','passengers')"><td>@child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:16px">(@value)</div></face>
    
                                <face filter="Field in ('passengersRoom')"><td>@child</td></face>
                                <face filter="Field in ('adult')"><span class="passengers">@value Adult</span></face>
                                <face filter="Field in ('child Withbed') and value <> '0'"><span class="passengers">@value Child</span></face>
                                <face filter="Field in ('child Withoutbed') and value <> '0'"><span class="passengers">@value Child (WOB)</span></face>
                                <face filter="Field in ('infant') and value <> '0'"><span class="passengers">@value Infant</span></face>
                                <face filter="Field in ('extra Adult') and value <> '0'"><span class="passengers">@value Extra Adult</span></face>
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:3>
    
                        <basis:333 core="group" if="'[##db.InvoiceType.Value##]' in ('3','6')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>             
                                <face filter="Field in ('products')">
                                   @child
                                </face>
    
                                <face filter="Field in ('departure','return','transfer','insurance','hotel','transfers')"></face>
                                <face filter="Field in ('services') and type in ('array') and value <> '[]'">
                                     <table class="invoice_tbl product_tbl">
                                        <caption class="invoice_caption"><p>مشخصات محصول - (اطلاعات  خدمات وگشت)</p></caption>
                                        <thead>
                                            <tr>            
                                               
                                                <td>نام مسافر</td>
                                                 <td>نام خدمات</td>
                                                  <td>وب سرویس</td>
                                                <td>قیمت کل</td>
                                                <td>واحد</td>
                                                                                                    
                                            </tr>
                                        </thead>
    
                                        <tbody class="invoice_tbody"> @child</tbody>
                                    </table>              
                                </face>
                                
                                <face filter="Field in ('service')"><tr>@Child</tr></face>
                                <face filter="Field in ('service_passengerlist')"><td>@Child</td></face>
                                <face filter="Field in ('servicename')"><td>@value</td></face>
                                <face filter="Field in ('webservices')"><td>@child</td></face>
                                <face filter="Field in ('webservice')">@value</face>
                                <face filter="Field in ('refnumber')">/@value</face>
                                <face filter="Field in ('servicecost')"><td>@value</td></face>
                                <face filter="Field in ('serviceunit')"><td>@value</td></face>
                                <face filter="Field in ('firstname')"><div><span>@value-</span></face>
                                <face filter="Field in ('lastname')"><span>@value</span></div></face>
    
                                           
                                <face filter="Field in ('cancel') and value ='1'">
                                   
                                        <input type="hidden" name="" class="canceli" value="1">
                                </face>
                                <face filter="Field in ('cancel') and value ='0'">
                                  
                                        <input type="hidden" name="" class="canceli" value="0">
                                </face>   
    
                                <face filter="Field in ('error') and value ='1'">
                                      <td class="Webervice_Refnumber">
                                        <div>ناموفق</div>
                                        <div>
                                            <a href="/reservation/invoice/Get_Refnumber.bc?id=[##cms.form.id##]&type=3&clear=[##cms.form.clear##]" class="Webervice_Link" title="صدور هتل">
                                                صدور هتل
                                                <i class="fa fa-external-link-square-alt"></i>
                                            </a>
                                        </div>
                                    </td>
                                </face>                
                            
    
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
    
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>             
                                <face filter="Field in ('products')">
                                   @child
                                </face>
    
                                <face filter="Field in ('departure','return','transfer','insurance','hotel','services')"></face>
                                <face filter="Field in ('transfers')">
                                     <table class="invoice_tbl product_tbl">
                                        <caption class="invoice_caption"><p>مشخصات محصول - (اطلاعات   ترنسفر)</p></caption>
                                        <thead>
                                            <tr>            
                                               
                                                <td>نام خدمات</td>
                                                 <td>نام ترنسفر</td>
                                                <td>نوع ترنسفر</td>
                                                <td>فرودگاه</td>
    
                                                <td>تاریخ پرواز رفت</td>
                                                <td>تاریخ پرواز برگشت</td>
                                                <td>کدمسیر  رفت</td>
                                                <td>کدمسیربرگشت</td>
    
                                                <td>ساعت پرواز  رفت</td>
                                                <td>ساعت پرواز برگشت</td>
                                                 <td>وب سرویس</td>
                                                 <td>قیمت کل</td>
                                                  <td>واحد</td>
                                                                                                    
                                            </tr>
                                        </thead>
    
                                        <tbody class="invoice_tbody"> <tr>@Child</tr></tbody>
                                    </table>              
                                </face>
                                
                                
                                <face filter="Field in ('t_servicename')"><td>@value</td></face>
                                <face filter="Field in ('transfername')"><td>@value</td></face>
                                <face filter="Field in ('routename')"><td>@value</td></face>
                                <face filter="Field in ('airport')"><td>@value</td></face>
                                <face filter="Field in ('departure_Date')"><td>@value</td></face>
                                <face filter="Field in ('return_Date')"><td>@value</td></face>
                                <face filter="Field in ('departure_routecode')"><td>@value</td></face>
                                <face filter="Field in ('return_routecode')"><td>@value</td></face>
                                <face filter="Field in ('departure_hour')"><td>@value</td></face>
                                <face filter="Field in ('return_hour')"><td>@value</td></face>
                                <face filter="Field in ('transfercost')"><td>@value</td></face>
                                <face filter="Field in ('transferunit')"><td>@value</td></face>
                                 <face filter="Field in ('webservices')"><td>@child</td></face>
                                <face filter="Field in ('webservice')">@value</face>
                                <face filter="Field in ('refnumber')">/@value</face>
    
    
                                           
                                <face filter="Field in ('cancel') and value ='1'">
                                   
                                        <input type="hidden" name="" class="canceli" value="1">
                                </face>
                                <face filter="Field in ('cancel') and value ='0'">
                                  
                                        <input type="hidden" name="" class="canceli" value="0">
                                </face>   
    
                                <face filter="Field in ('error') and value ='1'">
                                      <td class="Webervice_Refnumber">
                                        <div>ناموفق</div>
                                        <div>
                                            <a href="/reservation/invoice/Get_Refnumber.bc?id=[##cms.form.id##]&type=3&clear=[##cms.form.clear##]" class="Webervice_Link" title="صدور هتل">
                                                صدور هتل
                                                <i class="fa fa-external-link-square-alt"></i>
                                            </a>
                                        </div>
                                    </td>
                                </face> 
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
    
                        </basis:333>
    
                        <!-- type == 4 -->
                        <basis:4 core="group" if="[##db.InvoiceType.Value##] in ('4')">
                            <!-- city Transfer in tour -->
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('transfer') and value <> '[]'">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات ترنسفر بین شهری</span> / <span>INTERURBAN TRANSFER INFORMATION</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>مبدا - مقصد</span><span>FROM - TO</span></th>
                                                <th><span>تاریخ</span><span>DATE</span></th>
                                                <th><span>زمان خروج</span><span>EXit TIME</span></th>
                                                <th><span>زمان ورود</span><span>ARRIVAL TIME</span></th>
                                                <th><span>نام ایرلاین</span><span>AIRLINE</span></th>
                                                <th><span>فرودگاه مبدا</span><span>DEPARTURE AIRPORT</span></th>
                                                <th><span>فرودگاه مقصد</span><span>DESTINATION AIRPORT</span></th>
                                                <th><span>شماره پرواز</span><span>FLIGHT NO</span></th>
                                                <th><span>کلاس پروازی</span><span>FLIGHT CLASS</span></th>                                                       
                                            </tr>
                                        </thead>
    
                                        <tbody>@child</tbody>
                                    </table>
                                </face>
                                
                                <face filter="Field in ('departure','return','hotels','insurance')"></face>  
                                <face filter="Field in ('route') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('route') and type in ('scalar.String')"><td style="font-family:IRANSansWeb">@value</td></face>
                                <face filter="Field in ('etime','atime','class','routecode') and type in ('scalar.String')"><td>@value</td></face>
                                <face filter="Field in ('airline')"><td>@value</td></face>
                                
                                            
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:11px">(@value)</div></face>
    
                                <face filter="Field in ('startairport','endairport')"><td>@Child</td></face>
                                <face filter="Field in ('airport')"><div>@value</div></face>
                                <face filter="Field in ('startotherinfo')"><div>@Child</div></face>
                                <face filter="Field in ('shortname')">@value | </face>           
                                <face filter="Field in ('city')">@value</face>     
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>                                  
    
                            <!-- insurance in tour -->            
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face> 
                                <face filter="Field in ('products')">@Child</face>                                     
                                <face filter="Field in ('insurance') and value <> '[]'">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات بیمه</span> / <span>INSURANCE INFORMATION</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>کشور</span><span>COUNTRY</span></th>
                                                <th><span>نوع بیمه</span><span>INSURANCE TYPE</span></th>
                                                <th><span>شرکت بیمه کننده</span><span>INSURANCE COMPANY</span></th>                                                  
                                            </tr>
                                        </thead>
    
                                        <tbody><tr>@child</tr></tbody>
                                    </table>
                                </face>
    
                                <face filter="Field in ('insuranceCountry','insuranceName','insuranceProvider')"><td style="font-family:IRANSansWeb;">@value</td></face>    
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
    
                            <!-- tourDetails in tour -->
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate')"></face> 
                                <face filter="Field in ('products')">@Child</face>                                     
                                <face filter="Field in ('tourDetails') and value <> '{}'">
                                    <table class="invoice_tbl tourDetails">
                                        <colgroup>
                                            <col width="20%"></col>
                                            <col width="80%"></col>
                                        </colgroup>
    
                                        <caption class="invoice_caption"><span>جزئیات تور </span> / <span>TOUR INFORMATION </span></caption>
                                        <tbody>@child</tbody>
                                    </table>
                                </face>
    
                                <face filter="Field in ('type') and type in ('array')">
                                    <tr>
                                        <td><span>نوع تور</span><span>TOUR TYPE</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face> 
    
                                <face filter="Field in ('appropriate') and type in ('array')">
                                    <tr>
                                        <td><span>مناسب برای</span><span>SUITABLE FOR</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('diff') and type in ('array')">
                                    <tr>
                                        <td><span>سطح سختی</span><span>HARDNESS LEVEL</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('tool') and type in ('array')">
                                    <tr>
                                        <td><span>ملزومات مورد نیاز</span><span>REQUIRED REQUIREMENTS</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('service11') and type in ('array')">
                                    <tr>
                                        <td><span>خدمات رایگان</span><span>FREE SERVICES</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('journey') and type in ('array')">
                                    <tr>
                                        <td><span>برنامه سفر</span><span>ITINERARY</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('description') and type in ('array')">
                                    <tr>
                                        <td><span>توضیحات</span><span>DESCRIPTION</span></td>
                                        <td>@child</td>
                                    </tr>
                                </face>
    
                                <face filter="Field in ('servicename','decs')"><span class="serviceName">@value</span></face>
                                <face filter="Field in ('journeytitle')"><span class="serviceName">@value : </face>
                                <face filter="Field in ('journeydesc')"> @value</span></face>
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:4>
    
                        <!-- type == 5 -->
                        <basis:5 core="group" if="[##db.InvoiceType.Value##] in ('5','6')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">@Child</face>                                     
                                <face filter="Field in ('insurance')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات بیمه</span> / <span>INSURANCE INFORMATION</span></caption>
                                        <thead>
                                            <tr> 
                                                <th><span>کشور</span><span>COUNTRY</span></th>
                                                <th><span>نام بیمه</span><span>INSURANCE NAME</span></th>
                                                <th><span>مدت زمان</span><span>PERIOD OF TIME</span></th>
                                                <th><span>شرکت بیمه کننده</span><span>INSURANCE COMPANY</span></th>             
                                                       
                                            </tr>
                                        </thead>
    
                                        <tbody><tr>@child</tr></tbody>
                                    </table>
                                </face>
    
                                <face filter="Field in ('departure','return','hotel')"></face>
                                <face filter="Field in ('country','name','Provider')"><td style="font-family:IRANSansWeb">@value</td></face>    
                                <face filter="Field in ('duration') and type in ('object')"><td style="direction:rtl;font-family:IRANSansWeb">@child</td></face>    
                                <face filter="Field in ('duration') and type in ('Scalar.String')"><span style="margin:0 2px"> @value</span></face>    
                                <face filter="Field in ('durationtype') and type in ('Scalar.String')"><span> @value</span></face>    
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:5>
    
                        <!-- products type == 8 -->
                        <basis:6 core="group" if="[##db.InvoiceType.Value##] in ('8')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات قطار یکطرفه</span> / <span>ONE-WAY TRAIN INFORMATION</span></caption>
                                        <thead>
                                            <tr> 
                                                <th><span>مبدا - مقصد</span><span>FROM - TO</span></th>
                                                <th><span>تاریخ</span><span>DATE</span></th>
                                                <th><span>زمان خروج</span><span>EXit TIME</span></th>
                                                <th><span>زمان ورود</span><span>ARRIVAL TIME</span></th>
                                                <th><span>نام شرکت</span><span>COMAPANY</span></th>
                                                <th><span>ایستگاه مبدا</span><span>DEPARTURE STATION</span></th>
                                                <th><span>ایستگاه مقصد</span><span>DESTINATION STATION</span></th>
                                                <th><span>شماره قطار</span><span>TRAIN NO</span></th>
                                                <th><span>کلاس قطار</span><span>TRAIN CLASS</span></th>              
                                            </tr>
                                        </thead>
    
                                        <tbody>@child</tbody>
                                    </table>
                                </face>
                                
                                <face filter="Field in ('route') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('route','etime','atime','class','routecode') and type in ('scalar.String')">
                                    <td style="direction:rtl">@value</td>
                                </face>
    
                                <face filter="Field in ('trainid')"><td>@value</td></face>
                                            
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:11px">(@value)</div></face>
    
                                <face filter="Field in ('startairport','endairport')"><td>@Child</td></face>
                                <face filter="Field in ('airport')"><div>@value</div></face>
                                <face filter="Field in ('startotherinfo')"><div>@Child</div></face>
                                <face filter="Field in ('shortname')">@value | </face>           
                                <face filter="Field in ('city')">@value</face>      
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:6>
    
                        <!-- products type == 9 -->
                        <basis:7 core="group" if="'[##db.InvoiceType.Value##]' in ('9')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات قطار دوطرفه </span> / <span>ROUND-TRIP TRAIN INFORMATION</span></caption>
                                        <thead>
                                            <tr>            
                                                <th><span>مبدا - مقصد</span><span>FROM - TO</span></th>
                                                <th><span>تاریخ</span><span>DATE</span></th>
                                                <th><span>زمان خروج</span><span>EXit TIME</span></th>
                                                <th><span>زمان ورود</span><span>ARRIVAL TIME</span></th>
                                                <th><span>نام شرکت</span><span>COMAPANY</span></th>
                                                <th><span>ایستگاه مبدا</span><span>DEPARTURE STATION</span></th>
                                                <th><span>ایستگاه مقصد</span><span>DESTINATION STATION</span></th>
                                                <th><span>شماره قطار</span><span>TRAIN NO</span></th>
                                                <th><span>کلاس قطار</span><span>TRAIN CLASS</span></th>                                                     
                                            </tr>
                                        </thead>
    
                                        @child
                                    </table>
                                </face>
    
                                <face filter="Field in ('hotel','transfer','insurance')"></face>
                                <face filter="Field in ('departure') and type in ('array')">
                                    <tbody>
                                        <tr>
                                            <td colspan="10" style="background:#FFF4E3;text-align:right;padding-right:22px;font-family:IRANSansWeb">
                                                Departure Information /  مسیر رفت  
                                            </td>
                                        </tr>
                                        @child  
                                    </tbody>                 
                                </face> 
    
                                <face filter="Field in ('return') and type in ('array')">
                                    <tbody>
                                        <tr>
                                            <td colspan="10" style="background:#FFF4E3;text-align:right;padding-right:22px;font-family:IRANSansWeb">
                                                 Return Information /  مسیر برگشت 
                                            </td>
                                        </tr>
                                        @child
                                    </tbody>
                                </face>   
    
                                <face filter="Field in ('route') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('route','etime','atime','class','routecode') and type in ('scalar.String')"><td style="direction:rtl">@value</td></face>
                                <face filter="Field in ('trainid')"><td>@value</td></face>
                                        
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:16px">(@value)</div></face>
    
                                <face filter="Field in ('startairport','endairport')"><td>@Child</td></face>
                                <face filter="Field in ('airport')"><div>@value</div></face>
                                <face filter="Field in ('startotherinfo')"><div>@Child</div></face>
                                <face filter="Field in ('shortname')">@value | </face>           
                                <face filter="Field in ('city')">@value</face>       
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:7>
                        
                        <!-- passengesr ########################################################################################### -->
                        <basis core="group" if="[##db.InvoiceType.Value##] not in ('13')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">   
                                <face filter="Field in ('invoiceDetails','invoiceDate','products','account','priceDetails','baggages','bill','creditPay','passengersvisa')"></face>
                                <face filter="Field in ('passengers')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>لیست مسافران</span> / <span>PASSENGERS INFORMATION</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>نام</span> <span>NAME</span></th>
                                                <th><span>نام خانوادگی</span><span>SURNAME</span></th>
                                                <th><span>تاریخ تولد</span><span>DATE OF BIRTH</span></th>
                                                <th><span>کدملی</span><span>NATIONAL CODE</span></th>
                                                <th><span>کد پاسپورت</span><span>PASSPORT NO</span></th>
                                                <th><span>اعتبار پاسپورت</span><span>EXPIRATION DATE OF PASSPORT</span></th>
                                                <th><span>جنسیت</span><span>GENDER</span></th>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                            </tr>
                                        </thead>
                                        <tbody class="invoice_tbody">@Child</tbody>
                                    </table>
                                </face>       
        
                                <face filter="Field in ('passengerinfo')"><tr>@child</tr></face> 
                                <face filter="Field in ('firstname','lastname','nationalcode','passportcode','passportexpiration')"><td>@value</td></face>        
        
                                <face filter="Field in ('birthdate') and type in ('object')"><td>@child</td></face>
                                <face filter="Field in ('M_birthdate') and type in ('Scalar.String') and value not in ('-')"><p>@value</p></face>
                                <face filter="Field in ('S_birthdate') and type in ('Scalar.String') and value not in ('-')">
                                    <p style="font-size:16px">(@value)</p>
                                </face>
        
                                <face filter="Field in ('M_birthdate') and type in ('Scalar.String') and value in ('-')"><p></p></face>
                                <face filter="Field in ('S_birthdate') and type in ('Scalar.String') and value in ('-')">
                                    <p style="font-size:16px"></p>
                                </face>
        
                                <face filter="Field in ('gender') and value = '0'"><td>Female</td></face>
                                <face filter="Field in ('gender') and value = '1'"><td>Male</td></face>
                                <face filter="Field in ('type') and value = '0'"><td style="direction: ltr;">Infant</td></face>
                                <face filter="Field in ('type') and value = '1'"><td style="direction: ltr;">Child</td></face>
                                <face filter="Field in ('type') and value = '2'"><td style="direction: ltr;">Adult</td></face>
                                <face filter="Field in ('type') and value = '3'"><td style="direction: ltr;">Child</td></face>
                                <face filter="Field in ('type') and value = '4'"><td style="direction: ltr;">Adult|Ext </td></face>
                                <face filter="type in ('Array','object')">@Child</face>                                                
                            </basis>
                            </basis>
        
                            <basis core="group" if="[##db.InvoiceType.Value##] in ('13')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">   
                                <face filter="Field in ('invoiceDetails','invoiceDate','products','account','priceDetails','baggages','bill','creditPay','passengers')"></face>
                                <face filter="Field in ('passengersvisa')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>لیست مسافران</span> / <span>PASSENGERS INFORMATION</span></caption>
                                        <thead>
                                            <tr>
                                              
                                                <th><span>نام</span> <span>NAME</span></th>
                                                <th><span>نام خانوادگی</span><span>SURNAME</span></th>
                                                <th><span>تاریخ تولد</span><span>DATE OF BIRTH</span></th>
                                                <th><span>کدملی</span><span>NATIONAL CODE</span></th>
                                                <th><span>نام پدر</span><span>father name</span></th>
        
                                                <th><span>کد پاسپورت</span><span>PASSPORT NO</span></th>
        
                                                <th><span>اعتبار پاسپورت</span><span>EXPIRATION DATE OF PASSPORT</span></th>
                                                <th><span>تاریخ صدور گذرنامه</span><span>PASSPORT NO</span></th>
                                                <th><span>کشور</span><span>country</span></th>
                                                <th><span>کشور صادرکننده گذرنامه</span><span>PassportIssueCountry</span></th>
                                                <th><span>کشور محل تولد</span><span>Countryofbirth</span></th>
        
                                                <th><span>جنسیت</span><span>GENDER</span></th>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                            </tr>
                                        </thead>
                                        <tbody class="invoice_tbody">@Child</tbody>
                                    </table>
                                </face>       
        
                               <face filter="Field in ('passengerinfo')"><tr>@child</tr></face> 
                    <face filter="Field in ('firstname','lastname','nationalcode','passportcode','passportexpiration')"><td>@value</td></face>        
        
                    <face filter="Field in ('birthdate') and type in ('object')"><td>@child</td></face>
                    <face filter="Field in ('M_birthdate') and type in ('Scalar.String') and value not in ('-')"><p>@value</p></face>
                    <face filter="Field in ('S_birthdate') and type in ('Scalar.String') and value not in ('-')">
                        <p style="font-size:11px">(@value)</p>
                    </face>
        
                    <face filter="Field in ('M_birthdate') and type in ('Scalar.String') and value in ('-')"><p></p></face>
                    <face filter="Field in ('S_birthdate') and type in ('Scalar.String') and value in ('-')">
                        <p style="font-size:11px"></p>
                    </face>
        
                    <face filter="Field in ('countryofresidence','Countryofbirth','countryofpassportissue')"><td>@child</td></face>
                    <face filter="Field in ('ecountryname')">@value</face>
             
                    <face filter="Field in ('fathername')"><td>@value</td></face>
                
                     <face filter="Field in ('passportissuedate')"><td>@value</td></face>
                    <face filter="Field in ('gender') and value = '0'"><td>Female</td></face>
                    <face filter="Field in ('gender') and value = '1'"><td>Male</td></face>
                    <face filter="Field in ('type') and value = '0'"><td style="direction: ltr;" class="typepassenger">Infant</td></face>
                    <face filter="Field in ('type') and value = '1'"><td style="direction: ltr;" class="typepassenger">Child</td></face>
                    <face filter="Field in ('type') and value = '2'"><td style="direction: ltr;" class="typepassenger">Adult</td></face>
                    <face filter="Field in ('type') and value = '3'"><td style="direction: ltr;" class="typepassenger">Child</td></face>
                    <face filter="Field in ('type') and value = '4'"><td style="direction: ltr;" class="typepassenger">Adult (Extra)</td></face>
                
                    <face filter="type in ('Array','object')">@Child</face>                                               
                            </basis>
                            </basis>
    
                        <!-- price Details ######################################################################################## -->
                        <!-- type == 1,2,5,8,9 -->
                        <basis:8 core="group" if="[##db.InvoiceType.Value##] in ('1','2','5','8','9')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')"></face>     
                                <face filter="Field in ('priceDetails')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><p><span>جدول قیمت به تفکیک نفرات</span> / <span>COST TABLE BY PASSENGERS</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                                <th><span>تعداد مسافر</span><span>COUNT</span></th>
                                                <th><span>قیمت واحد</span><span>UNIT COST</span></th>
                                                <th><span>قیمت کل</span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody ">@Child</tbody>
                                    </table>
                                </face>           
                                     
                                <face filter="Field in ('adult')  and type in ('Object')">
                                    <tr>
                                        <td>Adult</td>
                                        @Child
                                    </tr>
                                </face> 
    
                                <face filter="Field in ('child')  and type in ('Object')">
                                    <tr>
                                        <td>Child</td>
                                        @Child
                                    </tr>
                                </face>             
    
                                <face filter="Field in ('infant') and type in ('Object')">
                                    <tr>
                                        <td>Infant</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('perperson','total')"><td>@value</td></face>
                                <face filter="Field in ('count')"><td>@value</td></face>
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>            
                            </basis>
                        </basis:8>
    
                        <!-- type == 3 -->
                        <basis:9 core="group" if="[##db.InvoiceType.Value##] in ('3')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')"></face>        
                                <face filter="Field in ('priceDetails')">
                                    <table class="invoice_tbl hidden">
                                        <caption class="invoice_caption"><p><span>جدول قیمت به تفکیک نفرات -اتاق</span> / <span>COST TABLE BY PASSENGERS - ROMM</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                                <th><span>اتاق</span><span>ROOM</span></th>
                                                <th><span>تعداد مسافر</span><span>COUNT</span></th>
                                                <th><span>قیمت واحد (به ازای هر مسافر)</span><span>UNIT COST(FOR EACH PASSENGER)</span></th>
                                                <th><span>قیمت کل </span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                                        
                                        @Child
                                    </table>
                                </face>           
                                
                                <face filter="Field in ('room')"><tbody class="invoice_tbody Room_priceDetails">@Child</tbody></face>
    
                                <face filter="Field in ('adult')">
                                    <tr>
                                        <td>Adult</td>
                                        @Child
                                    </tr>
                                </face> 
    
                                <face filter="Field in ('child Withbed')">
                                    <tr>
                                        <td>Child (WB)</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('child Withoutbed')">
                                    <tr>
                                        <td>Child (WOB)</td>
                                        @Child
                                    </tr>
                                </face>                
    
                                <face filter="Field in ('infant')">
                                    <tr>
                                        <td>Infant</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('extra Adult')">
                                    <tr>
                                        <td>Extra Adult</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('rooms')">
                                    <tr>
                                        <td>-</td>
                                        @Child
                                    </tr>
                                </face>
                        
                                <face filter="Field in ('roomIndex','perperson','total') and value = ''"><td>-</td></face>
                                <face filter="Field in ('roomIndex','perperson','total') and value <> ''"><td>@value</td></face>
                                <face filter="Field in ('count')"><td>@value</td></face>
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>           
                            </basis>
                        </basis:9>
    
                        <!-- type == 4 -->
                        <basis:10 core="group" if="[##db.InvoiceType.Value##] in ('4','10')">
                            <br><br>
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')"></face>        
                                <face filter="Field in ('priceDetails')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><p><span>جدول قیمت به تفکیک نفرات - اتاق</span> / <span>COST TABLE BY PASSENGERS - ROMM</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                                <th><span>اتاق</span><span>ROOM</span></th>
                                                <th><span>تعداد مسافر</span><span>COUNT</span></th>
                                                <th><span>قیمت واحد </span><span>UNIT COST</span></th>
                                                <th><span>قیمت کل </span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                                        
                                        @Child
                                    </table>
                                </face>           
                                
                                <face filter="Field in ('room')"><tbody class="invoice_tbody Room_priceDetails">@Child</tbody></face>
    
                                <face filter="Field in ('adult') and type = 'object'">
                                    <tr>
                                        <td>Adult</td>
                                        @Child
                                    </tr>
                                </face> 
    
                                <face filter="Field in ('child Withbed') and type = 'object'">
                                    <tr>
                                        <td>Child (WB)</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('child Withoutbed') and type = 'object'">
                                    <tr>
                                        <td>Child (WOB)</td>
                                        @Child
                                    </tr>
                                </face>                
    
                                <face filter="Field in ('infant') and type = 'object'">
                                    <tr>
                                        <td>Infant</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('extra Adult') and type = 'object'">
                                    <tr>
                                        <td>Extra Adult</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('rooms')">
                                    <tr>
                                        <td>-</td>
                                        @Child
                                    </tr>
                                </face>
                        
                                <face filter="Field in ('roomIndex','perperson','total') and value = ''"><td>-</td></face>
                                <face filter="Field in ('roomIndex','perperson','total') and value <> ''"><td>@value</td></face>
                                <face filter="Field in ('count')"><td>@value</td></face>
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>           
                            </basis>
                        </basis:10>
    
                        <!-- type == 6 -->
                        <basis:11 core="group" if="[##db.InvoiceType.Value##] in ('6')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDetails','invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay')"></face>        
    
                                <face filter="Field in ('priceDetails')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>جدول قیمت به تفکیک محصولات</span> / <span>COST TABLE BY PRODUCT</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>پرواز</span><span>FLIGHT</span></th>
                                                <th><span>هتل</span><span>HOTEL</span></th>
                                                <th><span>بیمه</span><span>INSURANCE</span></th>
                                                <th><span>جمع کل</span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody "><tr>@Child</tr></tbody>
                                    </table>
                                </face>           
                                     
                                <face filter="Field in ('flight','hotel','insurance','total')"><td>@value</td></face> 
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>            
                            </basis>
                        </basis:11>
    
                         <basis:12 core="group" if="[##db.InvoiceType.Value##] in ('11')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','creditPay')"></face>
                                <face filter="Field in ('products')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>اطلاعات  lounge </span> / <span>Lounge INFORMATION</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>نام محصول</span><span>ProductName</span></th>            
                                                <th><span>نام فرودگاه</span><span>AirportName</span></th>
                                                <th><span>شهر</span><span>City</span></th>
                                                <th><span>ایرلاین</span><span>Airline</span></th>
                                                <th><span>کد  مسیر</span><span>RouteCode</span></th>
                                                <th><span>تاریخ</span><span>Date</span></th>
                                                <th><span>ساعت پرواز</span><span>Time</span></th>
                                                <th><span>نوع سفر</span><span>Travel Type</span></th>
                                                <th><span>نوع پرواز</span><span>Flight Type</span></th>
                                                                                                  
                                            </tr>
                                        </thead>
    
                                        <tbody>@child</tbody>
                                    </table>
                                </face>
                                                                        
                                <face filter="Field in ('cip') and type in ('object')"><tr>@child</tr></face>
                                <face filter="Field in ('loungename','airportname','route','time','airline','routecode') and type in ('scalar.String')"><td>@value</td></face>
                                <face filter="Field in ('travelType') and value in ('1')"><td>داخلی</td></face> 
                                <face filter="Field in ('travelType') and value in ('2')"><td>خارجی</td></face>  
                                 <face filter="Field in ('flightType') and value in ('1')"><td>ورودی</face> 
                                <face filter="Field in ('flightType') and value in ('2')"><td>خروجی</face> 
                               <face filter="Field in ('city_flight')">-@value</td></face> 
                                <face filter="Field in ('routeDate')"><td>@Child</td></face>
                                <face filter="Field in ('mstring')"><div>@value</div></face>
                                <face filter="Field in ('sstring')"><div style="font-size:16px">(@value)</div></face>
                                <face filter="type in ('Array','object')">@Child</face>                                                     
                            </basis>
                        </basis:12>
    
                        <basis:13 core="group" if="[##db.InvoiceType.Value##] in ('11')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay','transfers','services','wheelchair','escortinfo')"></face>     
                                <face filter="Field in ('priceDetails')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><p><span>جدول قیمت به تفکیک نفرات</span> / <span>COST TABLE BY PASSENGERS</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>رنج سنی مسافر</span><span>AGE RANG</span></th>
                                                <th><span>تعداد مسافر</span><span>COUNT</span></th>
                                                <th><span>قیمت واحد</span><span>UNIT COST</span></th>
                                                <th><span>قیمت کل</span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody ">@Child</tbody>
                                    </table>
                                </face>           
                                     
                                <face filter="Field in ('adult') and type in ('object')">
                                    <tr>
                                        <td>Adult</td>
                                        @Child
                                    </tr>
                                </face> 
    
                                <face filter="Field in ('child') and type in ('object')">
                                    <tr>
                                        <td>Child</td>
                                        @Child
                                    </tr>
                                </face>             
    
                                <face filter="Field in ('infant') and type in ('object')">
                                    <tr>
                                        <td>Infant</td>
                                        @Child
                                    </tr>
                                </face>
    
                                <face filter="Field in ('perperson','total')"><td>@value</td></face>
                                <face filter="Field in ('count')"><td>@value</td></face>
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>            
                            </basis>
    
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay','adult','child','infant','services','wheelchair','escortinfo')"></face>     
                                <face filter="Field in ('transfers') and value not in ('[]')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><p><span>جدول قیمت ترنسفر</span> / <span>COST TABLE BY transfers</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>نام ترنسفر</span><span>TransferName</span></th>
                                                <th><span>آدرس</span><span>Address</span></th>
                                                <th><span>ساعت</span><span>Time</span></th>
                                                <th><span>تلفن</span><span>Phone</span></th>
                                                <th><span>قیمت واحد</span><span>UNIT COST</span></th>
                                                <th><span>قیمت کل</span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                                 <th><span>توضیحات</span><span>Description</span></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody ">@Child</tbody>
                                    </table>
                                </face>           
                                     
                         
    
                                <face filter="Field in ('car_name','address','time','phone','perperson','total','des_transfer')"><td>@value</td></face>
                               
                                <face filter="Field in ('unit')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>            
                            </basis>
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay','adult','child','infant','transfers','wheelchair','escortinfo')"></face>     
                                <face filter="Field in ('services') and type in ('Array') and value not in ('[]')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><p><span>جدول قیمت  خدمات</span> / <span>COST TABLE BY services</span></p></caption>
                                        <thead>
                                            <tr>
                                                <th><span>نام  خدمات</span><span>ServiceName</span></th>
                                                <th><span>تعداد</span><span>Count</span></th>
                                                <th><span>قیمت واحد</span><span>UNIT COST</span></th>
                                                <th><span>قیمت کل</span><span>TOTAL COST</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                                 <th><span>توضیحات</span><span>Description</span></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody ">@Child</tbody>
                                    </table>
                                </face>           
                                     
                         
    
                                <face filter="Field in ('service') and type in ('Object')"><tr>@child</tr></face>
                                <face filter="Field in ('perperson','total')"><td class="Seprator">@value</td></face>
                                <face filter="Field in ('count','unit','name','des_service')"><td>@value</td></face>
                                <face filter="type in ('Array','object')">@Child</face>                       
                            </basis>
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay','adult','child','infant','transfers','services','escortinfo')"></face>     
                                    <face filter="Field in ('wheelchair') and type in ('Object')">
                                        <table class="invoice_tbl">
                                            <caption class="invoice_caption"><p>جدول قیمت صندلی چرخدار</p></caption>
                                            <thead>
                                                <tr>
                                                   
                                                    <td>تعداد صندلی چرخدار</td>
                                                    <td>قیمت واحد</td>
                                                    <td>قیمت کل</td>
                                                    <td>واحد</td>
                                                </tr>
                                            </thead>
                                            
                                            <tbody class="invoice_tbody "><tr>@Child</tr></tbody>
                                        </table>
                                    </face> 
                                    <face filter="Field in ('perperson','total')"><td class="Seprator">@value</td></face>
                                    <face filter="Field in ('count','unit')"><td>@value</td></face>
                                    <face filter="type in ('Array','object')">@Child</face>                       
                            </basis>
    
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','creditPay','adult','child','infant','transfers','services','wheelchair')"></face>     
                                     <face filter="Field in ('escortinfo') and type in ('Array') and value not in ('[]')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption"><p>جدول قیمت   مشایعت کننده</p></caption>
                            <thead>
                                <tr>
                                    <td>نام</td>
                                    <td>نام خانوادگی</td>
                                    <td>جنسیت</td>
                                    <td>قیمت واحد</td>
                                    <td>قیمت کل</td>
                                    <td>واحد</td>
                                </tr>
                            </thead>
                            
                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>
                    <face filter="Field in ('escort') and type in ('Object')"><tr>@child</tr></face>
                    <face filter="Field in ('perperson','total')"><td class="Seprator">@value</td></face>
                    <face filter="Field in ('unit','firsname','lastname')"><td>@value</td></face>
                    <face filter="Field in ('gender') and value in ('0')"><td>خانم</td></face>
                     <face filter="Field in ('gender') and value in ('1')"><td>آقا</td></face>
                    <face filter="type in ('Array','object')">@Child</face>                           
                            </basis>
    
                        </basis:13>
    
    
                        <!-- bill ################################################################################################# -->
                        <basis:14 core="group" if="[##db.InvoiceType.Value##] in ('10','4')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','creditPay')"></face>
                                <face filter="Field in ('bill')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>جدول قیمت کلی</span> / <span>TOTAL COST TABLE</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>قیمت کل </span><span>TOTAL COST</span></th>
                                                <th><span>کسر کمیسیون</span><span>COMMISSION</span></th>
                                                <th><span>مبلغ تخفیف</span><span>DISCOUNT</span></th>                            
                                                <th><span>کد تخفیف</span><span>DISCOUNT CODE</span></th>
                                                <th><span>مبلغ قابل پرداخت با کسر کمیسیون</span><span>COST BY COMMISSION</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                           </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody"><tr>@Child</tr></tbody>
                                    </table>
                                </face>           
                        
                                <face filter="Field in ('totalprice','commission','couponcost','totalwithcommisions')"><td style="direction:rtl">@value</td></face>
                                <face filter="Field in ('unit','couponcode')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                 <face filter="Field in ('pdf_description') and value in ('[]')">
                                    <div  class="pdf_description">
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 1 : </span> <br>
                                            <span style="color:#CE0E0E">موضوع قرارداد : </span>
                                            موضوع این قرارداد تعیین حدود وظایف و مسئولیت های طرفین قرارداد و همچنین هزینه خدمات گردشـگري جهت ارائه بشرح مندرج در قرارداد می باشد . 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 2 : </span> <br>
                                            <span style="color:#CE0E0E">شرایط قرارداد : </span>
                                            چنانچه گشت از سوي کارگزار به دلیل حد نصاب نرسیدن قابل اجرا نباشد ، کارگزار موظف است قبل از تاریخ اجراي گشت مراتب را به نحو مقتضی با ارائه دلایل به اطلاع گردشگر رسانده، نسبت به استرداد کل وجوه دریافتی از گردشگر اقدام نماید . 
                                        </p>
                        
                                        <p style="margin:15px 0;color:#CE0E0E">
                                            <span style="color:#CE0E0E">توجه </span>
                                            در صورت تایید نشدن هتل دیگری جایگزین میشود که در صورت اختلاف نرخ بر حسب پکیج ، نرخ ما به التفاوت دریافت میگردد.
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 3 : </span> <br>
                                            ساعت تخلیه اتاق های هتل بر اساس قوانین و مقررات حاکم در مقصد مورد نظر بوده، گردشگر موظف به رعایت آن می باشد. در صورت تحویل اتاق زودتر از موعد مقرر توسط گردشگر، هیچ مبلغی به گردشگر مسترد نخواهد شد.  
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 4 : </span> <br>
                                            گردشگران انفرادي (تک نفره) به هنگام ثبت نام مشمول مقررات و نرخ استفاده از اتاق یک تخته می باشند.
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 5  : </span> <br>
                                            در خصوص تورهای برنـامه ریزي شـده بـا پروازهای غیر چارتر ، شـرایط ابطال مطابق با مقررات شـرکت هواپیمایی مربوطه و هتل محل اقامت اعمال خواهد شد .
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 6 : </span> <br>
                                            چنانچه در برخی مقاصد در بدو ورود گردشگر به فرودگاه کشور مقصد ، گذرنامه وي توسط مقامات ذیربط اخذ و نگهداری تا به هنگام مراجعت در فرودگاه به گردشگر عودت داده شود، در چنین شرایطی هیچگونه مسئولیتی متوجه کارگزار نخواهد بود. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 7 : </span> <br>
                                            در صورتیکه مطابق شرایط اعلامی از سوي سفارتخانه در خصوص بازگشت گردشگر، تضمینی از کارگزار اخذ شود، گردشگر موظف است به همان میزان، ضمانت نامه بانکی به کارگزار تسلیم نماید. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">تبصره 1 :</span> <br>
                                            گردشـگران پس از بازگشت از سفر ، جهت دریافت ضمانت نامه بانکی سپرده شده لازم است با در دست داشتن اصل گذرنامه و تصویر صفحه مربوط به مهر ورود و خروج کشور مقصد به کارگزار مراجعه نماید و کارگزار موظف است پس از تائید اصالت و صحت مدارك ارائه شده ، فورا نسبت به فک ضمانت نامه اقدام نماید.  
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 8 : </span> <br>
                                            در صورتیکه در روادیـد صادره مـدت زمان مشخصی جهت اقامت پیش بینی شـده باشد ، چنانچه هریک از گردشـگران از بازگشت به کشور در تاریخ از پیش تعییـن شـده خـودداري نماینـد و ایـن امر بـا تـوجه به تعهد گردشگر موجبـات خسارت به کارگزار را فراهم آورد، کـارگزار مجـاز است بـا ارائه مـدارك مسـتدل،معادل هزینه (خسارت) وارده را از طریق ضبط ضمانت نامه به نفع خود دریافت نماید .
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 9 : </span> <br>
                                            در صورت عدم صدور ویزا از طرف کشور مقصد ، کارگزار در این خصوص مسئولیتی نداشته ، لیکن در صورتی که کارگزار در این خصوص هزینه اي متقبل شده باشد ، جهت اخذ هزینه های انجام شده موظف است اسناد و مدارك معتبر را به گردشگر ارائه نماید . 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 10 : </span> <br>
                                            در صورتیکه گردشگر براي سایر گردشگران یا سرپرست گروه ، راهنمایان محلی و درکل کسانی که در اجراي گشت نقش داشتند مزاحمتی ایجاد نماید و یا مرتکب اعمال خلاف شئون و اخلاق عرفی در کشور مربوطه گردد ، سرپرست گروه موظف است بنا به صورتجلسه و گواھی دیگر اعضاي گروه حسب مورد تصمیم لازم را در خصوص آن گردشگر اتخاذ نموده و مراتب را جهت اقدام به کارگزار مجري گزارش نماید . 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 11 : </span> <br>
                                            رسیدگی به ھرگونه اختلاف فی ما بین طرفین قرارداد با ارائه دلایل بر عهده سازمـان میراث فرهنگی، صـنایع دستی و گردشگري بوده و آراء صادره از سازمان براي طرفین لازم الاجراست. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 12 : </span> <br>
                                            در خصوص ثبت نام گروهی در شرایط عادي(غیر فورس) فقط فردي که به نمایندگی از سوي گردشگران اقدام به ثبت نام و عقد قرارداد نموده مجاز به مراجعه به کارگزار جهت پیگیري ، ابطال و یا دریافت وجوه پرداختی بوده و سایر گردشگران در این خصوص مجاز به مراجعه به کارگزار نمی باشند . 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 13 : </span> <br>
                                            رعایت شئونات و اخلاقیات در طول سفر از سوي گردشگر الزامی بوده و ھمچنین گردشگر موظف به رعایت کلیه مقررات کشور مقصد می باشد. لذا عواقب ارتکاب هرگونه تخلف وتبعات داشتن داروهایی که احیانا در کشور مقصد غیر مجاز بوده، بر عهده گردشگر است و چنانچه از این بابت کارگزار جریمه اي پرداخت نماید می تواند با ارائه مستندات ، هزینه انجام شده را از گردشگردریافت نماید .
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 14 : </span> <br>
                                            اگر مسافرت به صورت گروهی و خانوادگی باشد ، در صورتیکه درخواست روادید هر یک از گردشگران، مردود یا با تأخیر دریافت شود بقیه گردشگران ملزم به استفاده از خدمات درخواستی و در صورت عدم استفاده می بایست کلیه هزینه های مربوط به ابطال را پرداخت نماید. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">تبصره 2 : </span> <br>
                                            در خصوص بستگان درجه یک ( پدر، مادر،همسر، فرزندان مجرد) هزینه روادید و یک شب اقامت در هتل و جریمه ابطال بلیط دریافت میگردد. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 15 : </span> <br>
                                            حفظ اموال و مدارك شخصی به عهده گردشگر بوده و در صورت مفقود شدن آن مسئولیتی متوجه مدیر گشت یا کارگزار نخواھد بود. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 16 : </span> <br>
                                            چنانچه صدور روادید و تحویل گذرنامه توسط برخی سفارتخانه ها در ساعات آخر قبل از شروع سفر صورت بگیرد، گردشگر بایستی مقدمات سفر خود را قبلا آماده نموده باشد . 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">تبصره 3 : </span> <br>
                                            اصل بر عادي بودن روادید است، لیکن چنانچه گردشـگر اصـرار بر اخذ روادید به شکل فوري را داشته باشد، مسئولیت های  ناشی از آن، بر عهده گردشگر خواهد بود 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 17 : </span> <br>
                                            درصورت درخواست سفارتخانه مربوطه جهت انجام مصاحبه با گردشگر و یا انگشت نگاري به منظور صدور روادید ، گردشگر بایستی با هماهنگی کارگزار در موعد مقرر در کنسولگري سفارتخانه ذیربط حضور یافته و در مصاحبه شرکت نماید و چنانچه به دلیل عدم انجام امور مذکور روادید از سوي سفارتخانه صادر نگردد، جرائم اخذ خواهد شد. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 18 : </span> <br>
                                            گردشگر موظف است در ساعات اعلام شده، در برنامه های گشت و ترانسفر فرودگاهی شرکت نموده و در صورت عدم حضور به موقع هنگام حرکت گشت ، شخصاً بایستی هزینه های مربوطه را جهت پیوستن به گروه و ادامه برنامه گشت پرداخت نماید ، در غیر اینصورت کارگزار مربوطه هیچگونه مسـئولیتی در این خصوص نخواهد داشت . 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 19 : </span> <br>
                                            در صورت ابطال گشت توسط گردشگر، کارگزار مجاز به ابطال روادید صادره براي گردشگر توسط مقامات سفارت صادرکننده روادید خواهد بود. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 20 : </span> <br>
                                            در قبال هرگونه افزایش غیرارادي در قیمت گشت اعم از افزایش نرخ بلیط و یـا سـایر خـدمات ، بـا ارائه مدارك مسـتند از سوي کارگزار با تأیید سازمان، گردشگر موظف به پرداخت مابه التفاوت اعلام شده از سوي کارگزار می باشد .
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">تبصره 4 : </span> <br>
                                            پرداخت کلیه عوارض خروج از کشور بر عهده گردشگر می باشد.
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 21 : </span> <br>
                                            چنانچه گردشگر ممنوع الخروج باشد و یا در بدو ورود به کشوري مقامات محلی از ورود آن به کشور جلوگیري نمایند، گردشگر ملـزم به پرداخت هزینه های صورت گرفته از سـوي کارگزار با ارائه مستـندات و مدارك مربوطه خواهد بود. سرپرست گشت نیز موظف به همکاری جهت بازگشت گردشگر به کشور می باشد و هیچ نوع مسئولیتی در این خصوص متوجه کارگزار نخواهد بود. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 22 : </span> <br>
                                            در صورتیکه گردشگر در خارج از کشور مستقلاً و خارج از برنامه گشت ارائه شده نسبت به خریداری خدمات اختیاری اقدام نموده و در آن شرکت نماید هزینه و مسئولیت عواقب آن در خصوص بروز حوادث بر عهده گردشگر خواهد بود. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 23 : </span> <br>
                                            کارگزار موظف است مطابق با دستورالعمل بیمه ابلاغی از سوي سازمان، اقدامات لازم را در خصوص پوشـش بیمه اي تکلیفی و اختیاري به عمل آورده و در صورت بروز هرنوع حادثه اي در طول سفر علاوه بر اقدام بر اساس شرایط بیمه تحت پوشش ، نسبت به همکاری و مساعدت های لازم در این خصوص اقدام نماید .
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 24:</span> <br>
                                            کنترل مدارك گردشگر، از جمله تاریخ اعتبار گذرنامه گردشگر و شرایط سنی همراهان بر عهده کارگزار می باشد. لذا در صورت قصور در این زمینه توسط کارگزار، کلیه هزینه ها و خسارات بر عهده کارگزار خواهد بود. 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 25:</span> <br>
                                            کارگزار متعهد است که برنامه سفر و گشت مورد توافق را به طور کامل و دقیق انجام دهد ، لیکن در صورت وقوع حوادث و پیشامدهای غیر منتظره از قبیل جنگ، شورش ، اعتصاب و مشکلاتی که از کنترل کارگزار خارج بوده و سـبب ابطال یا تغییر برنامه گشت شود مسئولیتی متوجه کارگزار نخواهد بود، لیکن کارگزار موظف است وجوه دریافتی را به گردشگر مسترد نماید . 
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 25:</span> <br> 
                                            در صورتیکه برنامه گشت ارائه شده توسط کارگزار، در طول سفر عیناً به اجرا گذاشته نشود و یا درسطحی بالاتر از آنچه
                                            در قرارداد توافق شده، ارائه نگردد گردشگر مجاز است موارد را با ارائه دلایل مستدل به کارگزار اعلام نموده، کارگزار موظف به
                                            جلب رضایت گردشگر می باشد و در صورت بروز اختلاف، رأي سازمان به عنوان حکم مورد پذیرش طرفین قرار خواهد گرفت.                       
                                            این قرارداد در 2 نسخه مشتمل بر 25 ماده و 4 تبصره تنظیم که هر کدام حکم واحد را داشته و بر اساس مواد 230 قانون مدنی بوده که براي طرفین و یا قائم مقام قانونی آنها لازم الاتباع می باشد
                                        </p>
                        
                                        <p style="margin:15px 0">
                                            <span style="font-weight:bold;">ماده 26 : </span> <br> 
                                            در صورت انصراف کتبی مسافر از همراهی تور ، تا یکماه قبل از پرواز معادل 20% قیمت کل تور و از یکماه تا سه هفته قبل از پرواز معادل 30% قیمت کل تور و از سه هفته تا 72 ساعت قبل از پرواز معادل 50% قیمت کل تور و در کمتر از 72 ساعت قبل از پرواز معادل 70% قیمت کل تور به عنوان جریمه از کل مبلغ گشت کسر و مابقی وجوه به مسافر پرداخت خواهد شد.
                                        </p>
                                    </div>
                                </face>
                                <face filter="Field in ('pdf_description') and value not in ('[]')">
                                    <div  class="pdf_description">
                                        @child
                                    </div>
                                </face>
                                <face filter="Field in ('note')">
                                     <p style="margin:15px 0">
                                        @child
                                        
                                        </p>
                                </face>
                                <face filter="Field in ('title')">
                                   
                                    <span style="font-weight:bold;">@value : </span> <br>
                                          
                                     
                                </face>
                                <face filter="Field in ('text')">
                                @value
                                </face>
                                <face filter="type in ('Array','object')">@Child</face>                   
                            </basis>
                        </basis:14>
                        <basis:15 core="group" if="[##db.InvoiceType.Value##] in ('3')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','creditPay')"></face>
                                <face filter="Field in ('bill')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>جدول قیمت کلی</span> / <span>TOTAL COST TABLE</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>قیمت کل </span><span>TOTAL COST</span></th>
                                                <th><span>کسر کمیسیون</span><span>COMMISSION</span></th>
                                                <th><span>مبلغ تخفیف</span><span>DISCOUNT</span></th>                            
                                                <th><span>کد تخفیف</span><span>DISCOUNT CODE</span></th>
                                                <th><span>مبلغ قابل پرداخت با کسر کمیسیون</span><span>COST BY COMMISSION</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                           </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody"><tr>@Child</tr></tbody>
                                    </table>
                                </face>           
                        
                                <face filter="Field in ('totalprice','commission','couponcost','totalwithcommisions')"><td style="direction:rtl">@value</td></face>
                                <face filter="Field in ('unit','couponcode')"><td style="font-family:IRANSansWeb;">@value</td></face>
                                 <face filter="Field in ('pdf_description') and value in ('[]')">
                                    <div  class="pdf_description">
                                        <p style="margin:15px 0;color:#CE0E0E">
                                            <span style="color:#CE0E0E">توجه </span>
                                            در صورت تایید نشدن هتل دیگری جایگزین میشود که در صورت اختلاف نرخ بر حسب پکیج ، نرخ ما به التفاوت دریافت میگردد.
                                        </p>
                                    </div>
                                </face>
                                <face filter="Field in ('pdf_description') and value not in ('[]')">
                                    <div  class="pdf_description">
                                        @child
                                    </div>
                                </face>
                                <face filter="Field in ('note')">
                                     <p style="margin:15px 0">
                                        @child
                                        
                                        </p>
                                </face>
                                <face filter="Field in ('title')">
                                   
                                    <span style="font-weight:bold;">@value : </span> <br>
                                          
                                     
                                </face>
                                <face filter="Field in ('text')">
                                @value
                                </face>
                                <face filter="type in ('Array','object')">@Child</face>                   
                            </basis>
                        </basis:15>
                        <basis:16 core="group" if="[##db.InvoiceType.Value##] not in ('4','10','3')">
                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                                <face filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','creditPay')"></face>
                                <face filter="Field in ('bill')">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption"><span>جدول قیمت کلی</span> / <span>TOTAL COST TABLE</span></caption>
                                        <thead>
                                            <tr>
                                                <th><span>قیمت کل </span><span>TOTAL COST</span></th>
                                                <th><span>کسر کمیسیون</span><span>COMMISSION</span></th>
                                                <th><span>مبلغ تخفیف</span><span>DISCOUNT</span></th>                            
                                                <th><span>کد تخفیف</span><span>DISCOUNT CODE</span></th>
                                                <th><span>مبلغ قابل پرداخت با کسر کمیسیون</span><span>COST BY COMMISSION</span></th>
                                                <th><span>واحد</span><span>UNIT</span></th>
                                           </tr>
                                        </thead>
                                        
                                        <tbody class="invoice_tbody"><tr>@Child</tr></tbody>
                                    </table>
                                </face>           
                        
                                <face filter="Field in ('totalprice','commission','couponcost','totalwithcommisions')"><td style="direction:rtl">@value</td></face>
                                <face filter="Field in ('unit','couponcode')"><td style="font-family:IRANSansWeb;">@value</td></face>
                        
                                <face filter="Field in ('pdf_description') and value not in ('[]')">
                                    <div  class="pdf_description">
                                        @child
                                    </div>
                                </face>
                                <face filter="Field in ('note')">
                                     <p style="margin:15px 0">
                                        @child
                                        
                                        </p>
                                </face>
                                <face filter="Field in ('title')">
                                   
                                    <span style="font-weight:bold;">@value : </span> <br>
                                          
                                     
                                </face>
                                <face filter="Field in ('text')">
                                @value
                                </face>
                                <face filter="type in ('Array','object')">@Child</face>                   
                            </basis>
                        </basis:16>
    
                      
                    </div>
    
                    <style type="text/css">
                        @font-face{
                            font-family:'IRANSansWeb';
                            src:url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.eot');src:local('?'),
                            url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.woff2') format("woff"),
                            url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.ttf') format("truetype"),
                            url('[##cms.cms.domainname##]/_fonts/IRANSansWeb.otf') format("otf");
                            font-weight:400;font-style:normal
                        }
                        @font-face{
                            font-family:'FontAwesome';
                            src:local('FontAwesome'),
                            url('[##cms.cms.domainname##]/_fonts/fontawesome-webfont.eot?#iefix');src:local('?'),
                            url('[##cms.cms.domainname##]/_fonts/fontawesome-webfont.woff') format("woff"),
                            url('[##cms.cms.domainname##]/_fonts/fontawesome-webfont.ttf') format("truetype"),
                            url('[##cms.cms.domainname##]/_fonts/fontawesome-webfont.otf') format("otf");
                            font-weight:400;font-style:normal
                        }
                        *{margin:0; padding:0;}
                        body{font-family:IRANSansWeb;font-size:20px;color:#3b3838;}
                        span,i{display:inline-block;}
                        p{text-align:justify;}
                        strong{color:#CE0E0E}
                        .clr{clear: both;}
                        .Panel_pdf{width:1400px;margin:0 auto;direction:rtl}
                        .pdf_title{text-align: center;margin-bottom: 15px;font-weight: bold;}
                        .pdf_description {margin:30px 0;text-align:justify;}
                        .pdf_direct{direction:ltr;}
                        .Panel_pdf table{width:100%;margin:40px 0;}
                        .Panel_pdf table caption{text-align:right;border-right: 1px solid #fff;border-left: 1px solid #fff;font-size:20px;}
                        .Panel_pdf table caption span{padding:5px}
                        .Panel_pdf table tr th{text-align:center;font-weight:normal;background:#DDE8F0;padding:6px 2px;font-size:18px}
                        .Panel_pdf table tr td{text-align:center;padding:6px 2px;direction: ltr;border: 1px solid #CBDDEA;background:#F4F8FB;font-size:18px;}
                        .Panel_pdf table tr td p{text-align:center;}
                        .Panel_pdf table.tourDetails tr td{text-align:right;padding:6px 5px;font-family:IRANSansWeb;}
                        .Panel_pdf table.tourDetails tr td:nth-child(1){background:#DDE8F0;font-family:IRANSansWeb;padding:6px 5px}
                        .passengers::after {content: "+";display: inline-block;margin: 0 3px;}
                        .passengers:last-child:after{display:none;}
                        th span{display: block;}
                        .hidden {display: none;}
                    </style>
                </body>
            </html>
        </basis>
    </basis>
     </basis>